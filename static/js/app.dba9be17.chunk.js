(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{15:function(e,t,n){"use strict";n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return y}));var r,c,a=n(10),o=n.n(a),i=(n(0),n(11)),s=n(33),u=n(12),l=n.n(u),b=n(16),d=n.n(b),j=n(1),f=["children","onPress"],O=["accessibilityLabel","accessibilityRole","accessibilityHint"];function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h,m,v=i.b.View(r||(r=o()(["\n  padding: ","px\n    ","px;\n  ","\n  ","\n  flex-direction: ",";\n  align-items: ",";\n"])),(function(e){return e.theme.margins.medium/2}),(function(e){return e.theme.margins.medium/2}),(function(e){var t=e.background,n=e.theme;return t?"background: "+n.colors[t]+";":""}),(function(e){var t=e.flex;return t?"flex: "+t+";":""}),(function(e){var t=e.direction;return t||"row"}),(function(e){var t=e.align;return t||"center"})),g=i.b.TouchableOpacity(c||(c=o()([""]))),y=function(e){var t=e.children,n=e.onPress,r=d()(e,f),c=r.accessibilityLabel,a=r.accessibilityRole,o=r.accessibilityHint,i=d()(r,O),s=Object(j.jsx)(v,p(p({},i),{},{children:t}));return n?Object(j.jsx)(g,{accessible:!0,accessibilityRole:a||"button",accessibilityLabel:c,accessibilityHint:o,onPress:n,children:s}):s},w=(i.b.View(h||(h=o()(["\n  background: ",";\n  width: ","px;\n  height: ","px;\n  border-radius: ","px;\n"])),(function(e){return e.color}),(function(e){return e.size}),(function(e){return e.size}),(function(e){return e.size/4})),i.b.View(m||(m=o()([""])))),P=function(e,t){return e?"string"===typeof e?Object(j.jsx)(t,{children:e}):e:null},S=function(e){var t=e.background,n=e.top,r=e.left,c=e.right,a=e.title,o=e.overline,i=e.description,u=e.children,l=e.onPress;return Object(j.jsxs)(y,{background:t,onPress:l,children:[r,Object(j.jsxs)(y,{flex:1,direction:"column",align:"stretch",children:[!!n,P(o,s.d),P(a,s.e),P(i,s.a),!!u&&Object(j.jsx)(w,{children:u})]}),c]})}},154:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(166),c=n(0),a=function(){return Object(c.useContext)(r.a)}},159:function(e,t,n){e.exports=n.p+"static/media/tourist.e3fa36f8.png"},166:function(e,t,n){"use strict";n.d(t,"b",(function(){return C})),n.d(t,"a",(function(){return P}));var r,c,a=n(12),o=n.n(a),i=n(21),s=n.n(i),u=n(5),l=n.n(u),b=n(10),d=n.n(b),j=n(15),f=n(0),O=n(11),x=n(35),p=n(33),h=n(1),m=O.b.View(r||(r=d()(["\n  background: ",";\n  margin: 5px;\n  border-radius: 5px;\n"])),(function(e){return e.theme.colors.destructive})),v=function(e){var t=e.notification,n=e.dismiss;return Object(h.jsx)(m,{children:Object(h.jsx)(j.b,{left:Object(h.jsx)(j.a,{children:Object(h.jsx)(x.a,{name:"alert-circle",color:"destructiveAlt"})}),right:Object(h.jsx)(j.a,{onPress:n,children:Object(h.jsx)(x.a,{name:"x",color:"destructiveAlt"})}),children:Object(h.jsx)(p.a,{color:"destructiveAlt",children:t.text})})})},g=n(366);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=Object(f.createContext)(void 0),S=O.b.View(c||(c=d()(["\n  position: absolute;\n  top: ","px;\n  width: 100%;\n  z-index: 1000;\n"])),(function(e){return e.top})),k=0,C=function(e){var t=e.children,n=Object(f.useState)([]),r=l()(n,2),c=r[0],a=r[1],o=Object(g.d)(),i=Object(f.useCallback)((function(e){var t=k++;return a((function(n){return[].concat(s()(n),[w(w({},e),{},{id:t})])})),t}),[a]),u=Object(f.useCallback)((function(e){a((function(t){return t.filter((function(t){return t.id!==e}))}))}),[a]),b=Object(f.useMemo)((function(){return{show:i,dismiss:u}}),[i,u]);return Object(h.jsxs)(P.Provider,{value:b,children:[c.length>0&&Object(h.jsx)(S,{top:o.top,children:c.map((function(e,t){return Object(h.jsx)(v,{dismiss:function(){return u(e.id)},notification:e},t)}))}),t]})}},241:function(e,t,n){e.exports=n.p+"static/media/error.f81af091.png"},250:function(e,t,n){"use strict";var r=n(45),c=n(146),a=n(0),o=n.n(a),i=n(366),s=n(135);var u,l,b,d,j,f,O,x,p,h,m,v,g,y,w,P,S,k,C=n(11),I=n(253),T=n(12),F=n.n(T),E=n(252),A=n(258),z=n(361),D=n(352),V=n(240),$=n(34),M=n(16),R=n.n(M),L=n(10),U=n.n(L),B=n(360),N=n(347),q=n(239);n(351);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K={},W=Object(B.a)(u||(u=U()(["\n    mutation CreateComment($params: CommentCreateParameters!) {\n  createComment(params: $params) {\n    id\n  }\n}\n    "])));Object(B.a)(l||(l=U()(["\n    query Feeds {\n  feeds {\n    id\n    name\n    posts {\n      id\n      body\n      media {\n        id\n      }\n    }\n  }\n}\n    "])));var _=Object(B.a)(b||(b=U()(["\n    query AllFeeds {\n  allFeeds {\n    id\n    name\n    users {\n      accessType\n      user {\n        name\n        username\n      }\n    }\n  }\n}\n    "])));var Y=Object(B.a)(d||(d=U()(["\n    query Feed($feedId: String!) {\n  feed(id: $feedId) {\n    id\n    name\n    users {\n      accessType\n      user {\n        id\n        name\n        username\n      }\n    }\n  }\n}\n    "])));var G=Object(B.a)(j||(j=U()(["\n    mutation CreateFeed($name: String!) {\n  createFeed(name: $name) {\n    id\n  }\n}\n    "])));var Q=Object(B.a)(f||(f=U()(["\n    mutation AddUserToFeed($accessType: String!, $userId: String!, $feedId: String!) {\n  addUserToFeed(accessType: $accessType, userId: $userId, feedId: $feedId) {\n    accessType\n  }\n}\n    "])));var X=Object(B.a)(O||(O=U()(["\n    mutation RemoveUserFromFeed($userId: String!, $feedId: String!) {\n  removeUserFromFeed(userId: $userId, feedId: $feedId)\n}\n    "])));var Z=Object(B.a)(x||(x=U()(["\n    mutation RemoveFeed($feedId: String!) {\n  removeFeed(feedId: $feedId)\n}\n    "])));var ee=Object(B.a)(p||(p=U()(["\n    query Post($postId: String!) {\n  post(id: $postId) {\n    id\n    creator {\n      id\n      name\n      avatar\n      username\n    }\n    created\n    comments {\n      id\n      creator {\n        username\n        name\n        id\n        avatar\n      }\n      content\n      created\n    }\n    media {\n      id\n      contentType\n      lowres\n      aspect\n      order\n      created\n      type\n    }\n  }\n}\n    "])));var te=Object(B.a)(h||(h=U()(["\n    query Posts($filter: PostFindParameters!) {\n  posts(filter: $filter) {\n    id\n    body\n    commentCount\n    creator {\n      name\n      username\n      avatar\n    }\n    created\n    media {\n      id\n      aspect\n      type\n    }\n  }\n}\n    "])));var ne=Object(B.a)(m||(m=U()(["\n    mutation CreatePost($params: PostCreateParameters!) {\n  createPost(params: $params) {\n    id\n  }\n}\n    "])));var re=Object(B.a)(v||(v=U()(["\n    mutation RemovePost($removePostId: String!) {\n  removePost(id: $removePostId)\n}\n    "])));var ce=Object(B.a)(g||(g=U()(["\n    query Profile {\n  profile {\n    id\n    username\n    name\n    admin\n    avatar\n    feeds {\n      feed {\n        id\n        name\n      }\n      accessType\n    }\n  }\n}\n    "])));function ae(e){var t=J(J({},K),e);return q.a(ce,t)}var oe=Object(B.a)(y||(y=U()(["\n    mutation SetProfileAvatar($mediaId: String) {\n  setProfileAvatar(mediaId: $mediaId) {\n    id\n  }\n}\n    "])));var ie=Object(B.a)(w||(w=U()(["\n    mutation InviteProfile($email: String!) {\n  inviteProfile(email: $email) {\n    id\n  }\n}\n    "])));var se=Object(B.a)(P||(P=U()(["\n    mutation RegisterPushNotification($token: String!) {\n  registerPushNotification(token: $token) {\n    id\n  }\n}\n    "])));var ue=Object(B.a)(S||(S=U()(["\n    query Users {\n  users {\n    id\n    name\n    username\n    avatar\n  }\n}\n    "])));var le=Object(B.a)(k||(k=U()(["\n    mutation RemoveUser($userId: String!) {\n  removeUser(userId: $userId)\n}\n    "])));var be=n(154),de=function(e){var t=Object(be.a)(),n=t.show,r=t.dismiss;Object(a.useEffect)((function(){if(e){console.error(e);var t=n({type:"error",text:e.message});return function(){r(t)}}}),[e,n,r])},je=n(1),fe=["data"];function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=Object(a.createContext)(void 0),he=function(e){var t=e.children,n=ae({variables:{}}),r=n.data,c=R()(n,fe);de(c.error);var o=Object(a.useMemo)((function(){var e;return(null==r||null==(e=r.profile)?void 0:e.feeds)||[]}),[r]),i=Object(a.useMemo)((function(){return null==r?void 0:r.profile}),[r]),s=Object(a.useMemo)((function(){return xe(xe({},c),{},{data:r,feeds:o,profile:i})}),[c,r,o]);return Object(je.jsx)(pe.Provider,{value:s,children:t})},me=n(5),ve=n.n(me),ge=["data"];function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pe=Object(a.createContext)(void 0),Se=function(e){var t=e.children,n=Object(a.useState)([]),r=ve()(n,2),c=r[0],o=r[1],i=function(e){var t=J(J({},K),e);return q.a(te,t)}({variables:{filter:{feeds:c.length>0?c:void 0,limit:3,offset:0}}}),s=i.data,u=R()(i,ge);de(u.error);var l=Object(a.useMemo)((function(){return(null==s?void 0:s.posts)||[]}),[s]),b=Object(a.useMemo)((function(){return we(we({},u),{},{data:s,feeds:c,posts:l,setFeeds:o})}),[u,s,c,o]);return Object(je.jsx)(Pe.Provider,{value:b,children:t})};function ke(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ce(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fe=function(e){var t=e.children,n=Object(a.useContext)($.a),r=n.token,c=n.domain,o=Object(a.useMemo)((function(){if(c){var e=Object(E.a)({uri:c+"/graphql"}),t=Object(V.a)((function(e,t){return{headers:Te(Te({},t.headers),{},{authorization:"bearer "+r})}}));return new A.a({cache:new z.a({typePolicies:{Query:{fields:{posts:{keyArgs:!1,merge:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=t.slice(),c=function(e){r.find((function(t){return t.__ref===e.__ref}))||r.push(e)},a=ke(n);!(e=a()).done;){var o=e.value;c(o)}return r}}}}}}),link:t.concat(e)})}}),[r,c]);return o?Object(je.jsx)(D.a,{client:o,children:Object(je.jsx)(he,{children:Object(je.jsx)(Se,{children:t})})}):Object(je.jsx)(je.Fragment,{children:t})},Ee={colors:{primary:"#1abc9c",icon:"#1abc9c",destructive:"#e74c3c",destructiveAlt:"#fff",header:"#f9f9f9",shade:"#f1f0f5",input:"#ddd",secondary:"blue",shadow:"#000",background:"#f2f3f8",text:"#000",textShade:"#999"},sizes:{corners:5,icons:24},margins:{small:8,medium:16,large:24},font:{baseSize:14}};function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var De,Ve,$e,Me,Re,Le,Ue,Be,Ne,qe,He,Je=ze(ze({},Ee),{},{colors:ze(ze({},Ee.colors),{},{primary:"#e67e22",input:"#333",header:"#222",icon:"#e67e22",background:"#151515",shadow:"#000",secondary:"blue",shade:"#000",text:"#fff",textShade:"#666"})}),Ke=n(358),We=n(356),_e=n(163),Ye=n(357),Ge=n(362),Qe={prefixes:["pictoroma://"],screens:{AcceptInvitation:"login/accept-invite"}},Xe=n(370),Ze=Object(C.b)(Xe.a)(De||(De=U()(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  z-index: 100;\n  align-items: center;\n  justify-content: center;\n"]))),et=C.b.ActivityIndicator(Ve||(Ve=U()([""]))),tt=function(){return Object(je.jsx)(Ze,{intensity:20,children:Object(je.jsx)(et,{})})},nt=n(35),rt=n(92),ct=C.b.TouchableOpacity($e||($e=U()([""]))),at=C.b.View(Me||(Me=U()(["\n  position: relative;\n  width: 50px;\n  height: 50px;\n  border-radius: 25px;\n  overflow: hidden;\n  align-items: center;\n  justify-content: center;\n  background-color: ",";\n"])),(function(e){return e.theme.colors.background})),ot=function(e){var t=e.mediaId,n=e.onPress,r=Object(je.jsx)(at,{children:t?Object(je.jsx)(rt.a,{media:{aspect:1,id:t}}):Object(je.jsx)(nt.a,{name:"user"})});return n?Object(je.jsx)(ct,{onPress:n,children:r}):r},it=n(21),st=n.n(it),ut=n(33),lt=C.b.TouchableOpacity(Re||(Re=U()([""]))),bt=function(e,t){return"secondary"===e?{bg:t.colors.secondary,fg:"#fff"}:"destructive"===e?{bg:"transparent",fg:t.colors.destructive}:{bg:t.colors.primary,fg:"#fff"}},dt=C.b.View(Le||(Le=U()(["\n  background: ",";\n  padding: ","px;\n  border-radius: ","px;\n  align-items: center;\n"])),(function(e){var t=e.theme,n=e.type;return bt(n,t).bg}),(function(e){return e.theme.margins.small}),(function(e){return e.theme.sizes.corners})),jt=Object(C.b)(ut.c)(Ue||(Ue=U()(["\n  color: ",";\n  font-weight: bold;\n"])),(function(e){var t=e.theme,n=e.type;return bt(n,t).fg})),ft=function(e){var t=e.title,n=e.onPress,r=e.accessibilityHint,c=e.accessibilityRole,a=e.accessibilityLabel,o=e.type;return Object(je.jsx)(lt,{onPress:n,accessible:!0,accessibilityHint:r,accessibilityRole:c,accessibilityLabel:a,children:Object(je.jsx)(dt,{type:o,children:Object(je.jsx)(jt,{type:o,children:t})})})},Ot=n(65),xt=n.n(Ot),pt=function(e){var t=e.visible,n=e.children,r=Object(a.useMemo)((function(){var e=document.createElement("div");return e.style.position="fixed",e.style.display="flex",e.style.flexDirection="column",e.style.left="0px",e.style.top="0px",e.style.width="100%",e.style.height="100%",e.style.transition="transform 0.3s",e.style.transform="translateY(100%)",e}),[]);return Object(a.useEffect)((function(){return document.body.appendChild(r),function(){document.body.removeChild(r)}}),[r]),Object(a.useEffect)((function(){r.style.transform=t?"translateY(0)":"translateY(100%)"}),[r,t]),xt.a.createPortal(Object(je.jsx)(je.Fragment,{children:n}),r)},ht=n(15),mt=n(28),vt=n.n(mt),gt=n(29),yt=n.n(gt),wt=n(42),Pt=n.n(wt),St=n(44),kt=n.n(St),Ct=n(24),It=n.n(Ct),Tt=n(70),Ft=n(13),Et=n(241),At=n.n(Et);function zt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=It()(e);if(t){var c=It()(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return kt()(this,n)}}var Dt,Vt,$t,Mt,Rt=C.b.KeyboardAvoidingView(Be||(Be=U()(["\n  flex: 1;\n"]))),Lt=C.b.Pressable(Ne||(Ne=U()(["\n  flex: 1;\n"]))),Ut=C.b.View(qe||(qe=U()(["\n  align-items: center;\n  justify-content: center;\n  flex: 1;\n"]))),Bt=C.b.Image(He||(He=U()(["\n  width: 150px;\n  height: 150px;\n"]))),Nt=function(e){Pt()(n,e);var t=zt(n);function n(e){var r;return vt()(this,n),(r=t.call(this,e)).state={hasError:!1},r}return yt()(n,[{key:"componentDidCatch",value:function(e,t){c.Native.captureException(e,{extra:t})}},{key:"render",value:function(){var e,t=this;return this.state.hasError?Object(je.jsxs)(Ut,{children:[Object(je.jsx)(Bt,{source:At.a}),Object(je.jsx)(ut.a,{children:"An error has occured"}),Object(je.jsx)(ut.d,{children:null==(e=this.state.error)?void 0:e.toString()}),Object(je.jsx)(ft,{onPress:function(){return t.setState({hasError:!1,error:void 0})},title:"Retry"})]}):Object(je.jsx)(je.Fragment,{children:this.props.children})}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),n}(o.a.Component),qt=function(e){var t=e.children,n=e.loading,r=Object(a.useState)(!1),c=ve()(r,2),o=c[0],i=c[1];return Object(a.useEffect)((function(){var e=Tt.a.addListener("keyboardDidShow",(function(){return i(!0)})),t=Tt.a.addListener("keyboardDidHide",(function(){return i(!1)}));return function(){e.remove(),t.remove()}}),[]),Object(je.jsx)(Lt,{disabled:!o,onPress:function(){return Tt.a.dismiss()},children:Object(je.jsxs)(Rt,{behavior:"ios"===Ft.a.OS?"padding":"height",children:[n&&Object(je.jsx)(tt,{}),Object(je.jsx)(Nt,{children:t})]})})},Ht=C.b.Pressable(Dt||(Dt=U()(["\n  flex: 1;\n"]))),Jt=C.b.View(Vt||(Vt=U()(["\n  background: ",";\n  width: 100%;\n  shadow-color: ",";\n  shadow-offset: 0 0;\n  shadow-opacity: 1;\n  shadow-radius: 200px;\n  border-radius: 12px;\n  margin-bottom: -12px;\n"])),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.shadow})),Kt=C.b.View($t||($t=U()(["\n  flex: 1;\n"]))),Wt=function(e){var t=e.visible,n=e.children,r=e.onClose,c=Object(i.d)();return Object(je.jsx)(pt,{visible:t,transparent:!0,animationType:"slide",children:Object(je.jsx)(qt,{children:Object(je.jsxs)(Kt,{children:[Object(je.jsx)(Ht,{onPress:r}),Object(je.jsxs)(Jt,{style:{paddingBottom:c.bottom+12},children:[Object(je.jsx)(ht.b,{right:Object(je.jsx)(ht.a,{onPress:r,children:Object(je.jsx)(nt.a,{name:"x-circle"})})}),n]})]})})})},_t=function(e){var t=e.selected,n=void 0===t?[]:t,r=e.feeds,c=void 0===r?[]:r,o=e.onSelect,i=Object(a.useState)(!1),s=ve()(i,2),u=s[0],l=s[1];return Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(ht.a,{onPress:function(){return l(!0)},children:Object(je.jsx)(nt.a,{name:"filter",color:n.length>0?"primary":"text"})}),Object(je.jsxs)(Wt,{visible:u,onClose:function(){return l(!1)},children:[c.map((function(e){var t=n.includes(e.id);return Object(je.jsx)(ht.b,{onPress:t?function(){return o(n.filter((function(t){return t!==e.id})))}:function(){return o([].concat(st()(n),[e.id]))},left:Object(je.jsx)(ht.a,{children:Object(je.jsx)(nt.a,{name:t?"check-circle":"circle"})}),title:e.name},e.id)})),n.length>0&&Object(je.jsx)(ht.b,{children:Object(je.jsx)(ft,{title:"Clear",onPress:function(){return o([])}})})]})]})};function Yt(e){var t=e.title,n=e.add,r=e.onPress,c=e.left;return Object(je.jsx)(ht.b,{onPress:r,left:c,title:t,background:"header",right:n&&Object(je.jsx)(ht.a,{onPress:n,children:Object(je.jsx)(nt.a,{name:"plus-circle",size:18})})})}var Gt=C.b.View(Mt||(Mt=U()(["\n  border-radius: 7px;\n  background: ",";\n  shadow-offset: 0px;\n  shadow-opacity: 0.1;\n  shadow-color: ",";\n  shadow-radius: 5px;\n  overflow: hidden;\n"])),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.shadow}));function Qt(e){var t=Object(a.useState)(!0),n=ve()(t,2),r=n[0],c=n[1],o=e,i=o.title,s=o.items,u=o.getKey,l=o.render,b=o.add,d=o.children;return Object(je.jsx)(ht.b,{children:Object(je.jsxs)(Gt,{children:[Object(je.jsx)(Yt,{left:Object(je.jsx)(ht.a,{children:Object(je.jsx)(nt.a,{name:r?"chevron-down":"chevron-up",size:18})}),title:i,add:b,onPress:function(){return c(!r)}}),r&&s&&s.map((function(e){return Object(je.jsx)(a.Fragment,{children:l(e)},u(e))})),r&&d,r&&!d&&(!s||0===s.length)&&Object(je.jsx)(ht.b,{left:Object(je.jsx)(ht.a,{children:Object(je.jsx)(nt.a,{color:"textShade",name:"maximize"})}),children:Object(je.jsx)(ut.a,{style:{marginLeft:10},color:"textShade",children:"Empty"})})]})})}var Xt,Zt,en,tn=n(2),nn=n.n(tn),rn=n(55),cn=C.b.TextInput(Xt||(Xt=U()(["\n  color: ",";\n  padding: ","px 0;\n  font-size: ","px;\n  width: 100%;\n"])),(function(e){return e.theme.colors.text}),(function(e){return e.theme.margins.small}),(function(e){return e.theme.font.baseSize})),an=function(e){var t=e.label,n=e.value,r=e.onChangeText,c=e.type,a=e.autoCorrect,o=e.secure,i=Object(C.c)();return Object(je.jsx)(cn,{value:n,keyboardType:c,autoCapitalize:"none",autoCorrect:a,secureTextEntry:o,placeholderTextColor:i.colors.textShade,placeholder:t,onChangeText:r})},on=C.b.TouchableOpacity(Zt||(Zt=U()([""]))),sn=C.b.View(en||(en=U()(["\n  min-height: 40%;\n"])));function un(e){var t=e.visible,n=e.onClose,r=e.items,c=e.onSelect,o=e.renderSelect,i=e.getKey,s=e.search,u=e.create,l=e.allowClear,b=Object(a.useState)(""),d=ve()(b,2),j=d[0],f=d[1],O=Object(a.useMemo)((function(){return s&&j?s(j,r):r}),[r,j,s]),x=Object(a.useCallback)((function(){f(""),n()}),[f,n]),p=Object(a.useCallback)((function(e){c(e),x()}),[c,x]),h=Object(a.useCallback)((function(){var e;return nn.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(u){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,nn.a.awrap(u(j));case 4:e=t.sent,c(e),x();case 7:case"end":return t.stop()}}),null,null,null,Promise)}),[u,j,x]);return Object(je.jsxs)(Wt,{visible:t,onClose:x,children:[s&&Object(je.jsx)(ht.b,{children:Object(je.jsx)(an,{label:"Search",value:j,onChangeText:f})}),Object(je.jsxs)(sn,{children:[u&&0===O.length&&j&&Object(je.jsx)(ht.b,{children:Object(je.jsx)(ft,{title:"Create "+j,onPress:h})}),O.length>0&&Object(je.jsx)(rn.a,{data:O,keyExtractor:i,style:{flex:1},renderItem:function(e){var t=e.item;return Object(je.jsx)(on,{onPress:function(){return p(t)},children:o(t)})}}),l&&Object(je.jsx)(ht.b,{children:Object(je.jsx)(ft,{title:"Clear",onPress:function(){return p(void 0)}})})]})]})}var ln,bn,dn,jn,fn,On,xn,pn,hn,mn=n(36),vn=n(353),gn=C.b.View(ln||(ln=U()([""]))),yn=function(e){var t=e.title,n=e.back,r=e.actions,c=e.right,a=Object(mn.p)(),o=Object(i.d)();return Object(je.jsx)(gn,{style:{paddingTop:o.top},children:Object(je.jsx)(ht.b,{left:!!n&&Object(je.jsx)(ht.a,{onPress:function(){return a.goBack()},children:Object(je.jsx)(vn.a,{name:"arrow-back-circle",size:26})}),right:(r||c)&&Object(je.jsxs)(je.Fragment,{children:[r&&r.map((function(e){return Object(je.jsx)(ft,{title:e.title,onPress:e.onPress},e.title)})),c]}),children:Object(je.jsx)(ut.b,{children:t})})})},wn=n(251),Pn=n(256),Sn=n(363),kn=n(77),Cn=C.b.ScrollView(bn||(bn=U()(["\n  height: ","px;\n  width: 100%;\n"])),(function(e){return e.height})),In=C.b.View(dn||(dn=U()(["\n  flex-direction: row;\n"]))),Tn=C.b.TouchableWithoutFeedback(jn||(jn=U()([""]))),Fn=C.b.View(fn||(fn=U()(["\n  width: ","px;\n"])),(function(e){return e.width})),En=C.b.View(On||(On=U()(["\n  border-radius: 20px;\n  overflow: hidden;\n"]))),An=C.b.View(xn||(xn=U()(["\n  shadow-color: ",";\n  shadow-offset: 0px 0px;\n  shadow-opacity: 0.4;\n  shadow-radius: 5px;\n"])),(function(e){return e.theme.colors.shadow})),zn=C.b.View(pn||(pn=U()(["\n  margin-top: 10px;\n  flex-direction: row;\n  justify-content: center;\n  width: 100%;\n"]))),Dn=C.b.View(hn||(hn=U()(["\n  width: 6px;\n  height: 6px;\n  background: ",";\n  margin: 0 5px;\n  border-radius: 3px;\n"])),(function(e){var t=e.selected,n=e.theme;return t?n.colors.primary:"#ccc"})),Vn=function(e){var t=e.current,n=e.total,r=Object(a.useMemo)((function(){return new Array(n).fill(void 0).map((function(e,t){return t}))}),[n]);return Object(je.jsx)(zn,{children:r.map((function(e){return Object(je.jsx)(Dn,{selected:e===t},e)}))})},$n=function(e){var t=e.media,n=Object(a.useState)(0),r=ve()(n,2),c=r[0],o=r[1],i=Object(a.useState)(0),s=ve()(i,2),u=s[0],l=s[1],b=function(){var e=Object(a.useContext)($.a).token;return Object(a.useCallback)((function(t){var n,r;return nn.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,n=Sn.b(t,Sn.a+"download.jpeg",{headers:{Authorization:"bearer: "+e}}),c.next=4,nn.a.awrap(n.downloadAsync());case 4:if(r=c.sent){c.next=7;break}throw new Error("failed");case 7:Pn.a(r.uri),kn.a.alert("Image saved"),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(0),kn.a.alert("Failed: "+c.t0.toString());case 14:case"end":return c.stop()}}),null,null,[[0,11]],Promise)}),[e])}(),d=Object(a.useContext)($.a),j=d.domain,f=d.token,O=Object(a.useMemo)((function(){return Math.round(u/c)||0}),[u,c]),x=Object(a.useState)(!1),p=ve()(x,2),h=p[0],m=p[1],v=Object(a.useMemo)((function(){return t.map((function(e){return{uri:j+"/api/media/"+(null==e?void 0:e.id),headers:{Authorization:"Bearer "+f}}}))}),[j,f,t]),g=Object(a.useMemo)((function(){return t[O]}),[t,O]),y=Object(a.useMemo)((function(){return(null==g?void 0:g.aspect)||1}),[g]);if(0===t.length)return Object(je.jsx)(je.Fragment,{});var w=function(){return Object(je.jsx)(wn.a,{images:v,imageIndex:O,visible:h,onRequestClose:function(){return m(!1)},FooterComponent:function(){return Object(je.jsxs)(C.a,{theme:Je,children:[Object(je.jsx)(ht.b,{right:Object(je.jsx)(ht.a,{onPress:function(){return b(v[O].uri)},children:Object(je.jsx)(nt.a,{name:"download"})})}),Object(je.jsx)(ht.b,{})]})}})};return 1===t.length?Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(w,{}),Object(je.jsx)(An,{children:Object(je.jsx)(Tn,{onPress:function(){return m(!0)},children:Object(je.jsx)(En,{children:Object(je.jsx)(rt.a,{media:t[0]})})})})]}):Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(w,{}),Object(je.jsx)(An,{children:Object(je.jsx)(En,{children:Object(je.jsx)(Cn,{horizontal:!0,scrollEventThrottle:16,snapToInterval:c,showsHorizontalScrollIndicator:!1,decelerationRate:0,snapToAlignment:"center",disableIntervalMomentum:!0,height:c/y,onScroll:function(e){var t=e.nativeEvent.contentOffset.x;l(t)},onLayout:function(e){var t=e.nativeEvent.layout.width;t!==c&&o(t)},children:Object(je.jsx)(Tn,{onPress:function(){return m(!0)},children:Object(je.jsx)(In,{children:t.map((function(e){return Object(je.jsx)(Fn,{width:c,children:Object(je.jsx)(rt.a,{media:e})},e.id)}))})})})})}),Object(je.jsx)(Vn,{current:O,total:t.length})]})};function Mn(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Rn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rn(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ln,Un,Bn,Nn,qn,Hn,Jn,Kn,Wn,_n,Yn,Gn,Qn,Xn,Zn,er,tr,nr,rr,cr,ar,or,ir,sr,ur,lr,br,dr,jr=function(){var e=Object(a.useContext)($.a),t=e.domain,n=e.token;return Object(a.useCallback)((function(e){var r,c,a,o,i,s,u;return nn.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:r=[],c=Mn(e);case 2:if((a=c()).done){l.next=22;break}return o=a.value,(i=new FormData).append("media",o),l.next=8,nn.a.awrap(fetch(t+"/api/media",{method:"POST",body:i,headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+n}}));case 8:if((s=l.sent).ok){l.next=16;break}return l.t0=console,l.next=13,nn.a.awrap(s.text());case 13:throw l.t1=l.sent,l.t0.error.call(l.t0,l.t1),new Error("Could not upload image");case 16:return l.next=18,nn.a.awrap(s.json());case 18:u=l.sent,r.push(u.ids[0]);case 20:l.next=2;break;case 22:return l.abrupt("return",r);case 23:case"end":return l.stop()}}),null,null,null,Promise)}),[n,t])},fr=function(){var e=Object(a.useContext)($.a),t=e.domain,n=e.token,r=function(e){var t=J(J({},K),e);return N.a(ne,t)}(),c=ve()(r,2),o=c[0],i=c[1].error;de(i);var s=jr();return Object(a.useCallback)((function(e,t,n){var r;return nn.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,nn.a.awrap(s(n));case 2:return r=c.sent,c.next=5,nn.a.awrap(o({variables:{params:{feed:e,body:t,media:r}}}));case 5:case"end":return c.stop()}}),null,null,null,Promise)}),[o,n,t])},Or=function(){var e=Object(a.useState)(!1),t=ve()(e,2),n=t[0],r=t[1],c=xr().refetch,o=function(e){var t=J(J({},K),e);return N.a(re,t)}(),i=ve()(o,2),s=i[0],u=i[1].error;return de(u),{removePost:Object(a.useCallback)((function(e){return nn.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return r(!0),t.prev=1,t.next=4,nn.a.awrap(s({variables:{removePostId:e}}));case 4:return t.next=6,nn.a.awrap(c());case 6:return t.prev=6,r(!1),t.finish(6);case 9:case"end":return t.stop()}}),null,null,[[1,,6,9]],Promise)}),[s]),loading:n}},xr=function(){return Object(a.useContext)(Pe)},pr=C.b.View(Ln||(Ln=U()(["\n  ","\n"])),(function(e){var t=e.fullWidth,n=e.theme;return t?"\n    background-color: "+n.colors.background+";\n  ":"\n    background-color: "+n.colors.background+";\n    margin: 7px;\n    border-radius: 7px;\n  "})),hr=C.b.View(Un||(Un=U()(["\n  flex-direction: row;\n  margin: 0 ","px;\n"])),(function(e){return 4*e.theme.margins.small})),mr=C.b.View(Bn||(Bn=U()(["\n  margin: 0 ","px;\n"])),(function(e){return 2*e.theme.margins.small})),vr=C.b.View(Nn||(Nn=U()(["\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n"]))),gr=C.b.View(qn||(qn=U()(["\n  flex: 1;\n  justify-content: center;\n"]))),yr=function(e){var t,n,r,c=e.post,o=e.fullWidth,i=Object(mn.p)(),s=Or(),u=s.removePost,l=s.loading,b=Object(a.useState)(!1),d=ve()(b,2),j=d[0],f=d[1];return Object(je.jsxs)(pr,{fullWidth:o,children:[l&&Object(je.jsx)(tt,{}),c.media&&Object(je.jsx)(mr,{children:Object(je.jsx)($n,{media:c.media})}),Object(je.jsxs)(hr,{children:[Object(je.jsx)(vr,{children:Object(je.jsx)(ht.a,{children:Object(je.jsx)(ot,{mediaId:null==c||null==(t=c.creator)?void 0:t.avatar})})}),Object(je.jsxs)(gr,{children:[Object(je.jsx)(ut.d,{children:(null==c||null==(n=c.creator)?void 0:n.name)||(null==c||null==(r=c.creator)?void 0:r.username)}),!(null==c||!c.body)&&Object(je.jsx)(ut.a,{children:null==c?void 0:c.body})]}),Object(je.jsxs)(vr,{children:[Object(je.jsxs)(ht.a,{onPress:function(){return i.navigate("Comments",{id:c.id})},children:[Object(je.jsx)(nt.a,{name:"message-circle",color:"text",size:20}),Object(je.jsx)(ut.a,{children:c.commentCount})]}),Object(je.jsx)(ht.a,{onPress:function(){return f(!0)},children:Object(je.jsx)(nt.a,{name:"more-horizontal",color:"text",size:20})})]})]}),Object(je.jsx)(Wt,{onClose:function(){return f(!1)},visible:j,children:Object(je.jsx)(ft,{onPress:function(){return u(c.id)},title:"Remove",type:"destructive"})})]})},wr=n(165),Pr=n(67),Sr=C.b.Image(Hn||(Hn=U()(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  border-radius: 5px;\n"]))),kr=C.b.View(Jn||(Jn=U()(["\n  padding-bottom: 100%;\n"]))),Cr=C.b.View(Kn||(Kn=U()(["\n  width: 33%;\n  align-items: center;\n  justify-content: center;\n"]))),Ir=C.b.View(Wn||(Wn=U()(["\n  flex-direction: row;\n  flex-wrap: wrap;\n"]))),Tr=C.b.TouchableOpacity(_n||(_n=U()(["\n  position: absolute;\n  top: 5px;\n  left: 0px;\n  bottom: 5px;\n  right: 10px;\n  justify-content: center;\n  align-items: center;\n  background: #ddd;\n  border-radius: 5px;\n"]))),Fr=C.b.TouchableOpacity(Yn||(Yn=U()(["\n  position: absolute;\n  top: 5px;\n  left: 0px;\n  bottom: 5px;\n  right: 10px;\n"]))),Er=function(e){var t=e.files,n=e.onUpdate,r=Object(a.useCallback)((function(){var e,r,c,a,o,i,s;return nn.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,nn.a.awrap(wr.a({mediaTypes:Pr.a.All,quality:1,base64:!0}));case 2:if(!(e=u.sent).cancelled&&e.base64){u.next=5;break}return u.abrupt("return");case 5:r=e.uri.split("/"),c=ve()(r,1),a=c[0],o=/\.(\w+)$/.exec(a),i=o?"image/"+o[1]:"image",s={type:i,name:a,uri:e.uri},n([].concat(st()(t),[s]));case 10:case"end":return u.stop()}}),null,null,null,Promise)}),[t,n]),c=Object(a.useCallback)((function(e){n(t.filter((function(t){return t!==e})))}),[t,n]);return Object(je.jsx)(ht.b,{children:Object(je.jsxs)(Ir,{children:[t.map((function(e){return Object(je.jsxs)(Cr,{children:[Object(je.jsx)(kr,{}),Object(je.jsx)(Fr,{onPress:function(){return c(e)},children:Object(je.jsx)(Sr,{source:{uri:e.uri}})})]},e.uri)})),Object(je.jsxs)(Cr,{children:[Object(je.jsx)(kr,{}),Object(je.jsx)(Tr,{onPress:r,children:Object(je.jsx)(nt.a,{name:"plus-circle",size:40})})]})]})})},Ar=function(e){var t=e.label,n=e.feeds,r=e.selected,c=e.onSelect,o=Object(a.useState)(!1),i=ve()(o,2),s=i[0],u=i[1];return Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(ht.b,{overline:t,onPress:function(){return u(!0)},children:Object(je.jsx)(ut.a,{children:(null==r?void 0:r.name)||"Select"})}),Object(je.jsx)(un,{visible:s,selected:r,onClose:function(){return u(!1)},items:n||[],getKey:function(e){return e.id},onSelect:c,renderSelect:function(e){return Object(je.jsx)(ht.b,{title:e.name})}})]})},zr=function(e){var t=e.label,n=e.users,r=e.selected,c=e.onSelect,o=Object(a.useState)(!1),i=ve()(o,2),s=i[0],u=i[1];return Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(ht.b,{overline:t,onPress:function(){return u(!0)},children:Object(je.jsx)(ut.a,{children:(null==r?void 0:r.name)||(null==r?void 0:r.username)||"Select"})}),Object(je.jsx)(un,{visible:s,selected:r,onClose:function(){return u(!1)},items:n||[],getKey:function(e){return e.id},onSelect:c,renderSelect:function(e){return Object(je.jsx)(ht.b,{title:e.name||e.username})}})]})},Dr=function(e){var t=e.label,n=e.items,r=e.selected,c=e.onSelect,o=Object(a.useState)(!1),i=ve()(o,2),s=i[0],u=i[1];return Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(ht.b,{overline:t,onPress:function(){return u(!0)},children:Object(je.jsx)(ut.a,{children:(null==r?void 0:r.key)||"Select"})}),Object(je.jsx)(un,{visible:s,selected:r,onClose:function(){return u(!1)},items:n,getKey:function(e){return e.key},onSelect:c,renderSelect:function(e){return Object(je.jsx)(ht.b,{title:e.key})}})]})},Vr=function(){var e=Object(a.useContext)($.a).pushToken,t=function(e){var t=J(J({},K),e);return N.a(se,t)}(),n=ve()(t,1)[0];return Object(a.useEffect)((function(){e&&n({variables:{token:e}})}),[e]),Object(je.jsx)(je.Fragment,{})},$r=function(){var e=jr(),t=function(e){var t=J(J({},K),e);return N.a(oe,t)}(),n=ve()(t,1)[0];return Object(a.useCallback)((function(t){var r,c,a;return nn.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!t){o.next=6;break}return o.next=3,nn.a.awrap(e([t]));case 3:o.t0=o.sent,o.next=7;break;case 6:o.t0=[];case 7:return r=o.t0,c=ve()(r,1),a=c[0],o.next=12,nn.a.awrap(n({variables:{mediaId:a}}));case 12:case"end":return o.stop()}}),null,null,null,Promise)}),[])},Mr=function(){return Object(a.useContext)(pe)},Rr=C.b.ScrollView(Gn||(Gn=U()(["\n  flex: 1;\n"]))),Lr=C.b.View(Qn||(Qn=U()(["\n  flex: 1;\n  background-color: ",";\n"])),(function(e){return e.theme.colors.background})),Ur=function(e){var t=e.navigation,n=Object(a.useState)(!1),r=ve()(n,2),c=r[0],o=r[1],i=xr().refetch,s=Mr(),u=s.feeds,l=s.refetch,b=s.loading,d=Object(a.useState)(),j=ve()(d,2),f=j[0],O=j[1],x=Object(a.useState)([]),p=ve()(x,2),h=p[0],m=p[1],v=Object(a.useState)(""),g=ve()(v,2),y=g[0],w=g[1],P=fr(),S=Object(a.useMemo)((function(){return(null==u?void 0:u.filter((function(e){return"admin"===e.accessType})).map((function(e){return e.feed})))||[]}),[u]),k=Object(a.useCallback)((function(){return nn.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,nn.a.awrap(P(f.id,y,h));case 3:return e.next=5,nn.a.awrap(i());case 5:o(!1),O(void 0),m([]),w(""),t.navigate("Feed",{});case 10:case"end":return e.stop()}}),null,null,null,Promise)}),[f,y,h]);return Object(mn.o)(Object(a.useCallback)((function(){l()}),[l])),u?Object(je.jsx)(qt,{loading:b||c,children:Object(je.jsxs)(Lr,{children:[Object(je.jsx)(yn,{title:"Create post"}),Object(je.jsxs)(Rr,{children:[Object(je.jsx)(Er,{files:h,onUpdate:m}),Object(je.jsx)(Ar,{label:"Feed",feeds:S,selected:f,onSelect:O}),Object(je.jsx)(ht.b,{overline:"Content",children:Object(je.jsx)(an,{label:"Tell your story...",value:y,onChangeText:w})})]}),Object(je.jsx)(ht.b,{children:!!f&&h.length>0&&Object(je.jsx)(ft,{onPress:k,title:"Create"})})]})}):Object(je.jsx)(je.Fragment,{})},Br=n(99),Nr=n(30),qr=n(80),Hr=C.b.View(Xn||(Xn=U()(["\n  background: ",";\n  flex-direction: row;\n  position: absolute;\n  bottom: 25px;\n  align-self: center;\n  padding: ","px;\n  border-radius: 45px;\n  shadow-color: ",";\n  shadow-offset: 0px 2px;\n  shadow-opacity: 0.2;\n  shadow-radius: 10px;\n"])),(function(e){return e.theme.colors.shade}),(function(e){return e.theme.margins.small}),(function(e){return e.theme.colors.shadow})),Jr=C.b.View(Zn||(Zn=U()(["\n  background-color: ",";\n  width: 55px;\n  height: 55px;\n  align-items: center;\n  justify-content: center;\n  border-radius: 40px;\n  shadow-offset: 0px 2px;\n  shadow-opacity: 0.2;\n  shadow-radius: 10px;\n"])),(function(e){var t=e.focus,n=e.theme;return t?n.colors.primary:"transparent"})),Kr=function(e){var t=e.navigation,n=e.state,r=e.descriptors,c=n.routes;return Object(je.jsx)(Hr,{children:c.map((function(e,c){var a=r[e.key].options,o=n.index===c;return Object(je.jsx)(qr.a,{onPress:function(){var n=t.emit({type:"tabPress",target:e.key,canPreventDefault:!0});o||n.defaultPrevented||t.navigate(e.name)},accessibilityRole:"button",children:Object(je.jsx)(Jr,{focus:o,children:a.tabBarIcon({focused:o})})},e.key)}))})},Wr=C.b.View(er||(er=U()(["\n  height: ","px;\n"])),(function(e){return 2*e.theme.margins.small+100})),_r=C.b.View(tr||(tr=U()(["\n  margin-top: 15px;\n  border-bottom-width: 15px;\n  margin-bottom: 15px;\n  border-color: ",";\n  background-color: ",";\n"])),(function(e){return e.theme.colors.shade}),(function(e){return e.theme.colors.background})),Yr=C.b.View(nr||(nr=U()(["\n  background-color: ",";\n  flex: 1;\n"])),(function(e){return e.theme.colors.background})),Gr=function(){var e=Object(a.useState)(!1),t=ve()(e,2),n=t[0],r=t[1],c=xr(),o=c.posts,i=c.loading,s=c.refetch,u=c.fetchMore,l=c.feeds,b=c.setFeeds,d=Mr().feeds,j=Object(a.useMemo)((function(){return d.map((function(e){return e.feed}))}),[d]),f=Object(a.useMemo)((function(){return Math.ceil(Nr.a.get("window").width/500)}),[]),O=Object(a.useCallback)((function(e){var t=e.item;return Object(je.jsx)(yr,{fullWidth:f<=1,post:t},t.id)}),[f]);return Object(je.jsx)(qt,{children:Object(je.jsx)(Yr,{children:Object(je.jsx)(rn.a,{ListHeaderComponent:Object(je.jsx)(yn,{title:"All posts",right:Object(je.jsx)(je.Fragment,{children:j.length>1&&Object(je.jsx)(_t,{feeds:j,selected:l,onSelect:b})})},"test"),ListFooterComponent:Object(je.jsx)(Wr,{}),data:o,keyExtractor:function(e){return e.id},renderItem:O,onEndReachedThreshold:.3,onEndReached:function(){n||(u({variables:{filter:{offset:o.length}}}),r(!0))},ItemSeparatorComponent:_r,onMomentumScrollBegin:function(){r(!1)},refreshControl:Object(je.jsx)(Br.a,{refreshing:i,onRefresh:s})})})})},Qr=function(e){var t=function(e){var t=J(J({},K),e);return q.a(Y,t)}({variables:{feedId:e}}),n=t.data,r=t.refetch,c=t.loading,o=t.error;return de(o),{feed:Object(a.useMemo)((function(){return null==n?void 0:n.feed}),[n]),refetch:r,loading:c,error:o}},Xr=function(){var e=function(e){var t=J(J({},K),e);return q.a(_,t)}(),t=e.data,n=e.refetch,r=e.loading,c=e.error;return de(c),{feeds:Object(a.useMemo)((function(){return(null==t?void 0:t.allFeeds)||[]}),[t]),refetch:n,loading:r,error:c}},Zr=function(){var e=function(e){var t=J(J({},K),e);return N.a(G,t)}(),t=ve()(e,2),n=t[0],r=t[1].error;return de(r),Object(a.useCallback)((function(e){return nn.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nn.a.awrap(n({variables:{name:e}}));case 2:case"end":return t.stop()}}),null,null,null,Promise)}),[n])},ec=function(){var e=function(e){var t=J(J({},K),e);return N.a(Q,t)}(),t=ve()(e,2),n=t[0],r=t[1].error;return de(r),Object(a.useCallback)((function(e,t,r){return nn.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,nn.a.awrap(n({variables:{feedId:e,userId:t,accessType:r}}));case 2:case"end":return c.stop()}}),null,null,null,Promise)}),[n])},tc=function(){var e=function(e){var t=J(J({},K),e);return N.a(X,t)}(),t=ve()(e,2),n=t[0],r=t[1].error;return de(r),Object(a.useCallback)((function(e,t){return nn.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,nn.a.awrap(n({variables:{feedId:e,userId:t}}));case 2:case"end":return r.stop()}}),null,null,null,Promise)}),[n])},nc=function(){var e=function(e){var t=J(J({},K),e);return N.a(Z,t)}(),t=ve()(e,2),n=t[0],r=t[1].error;return de(r),Object(a.useCallback)((function(e){return nn.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nn.a.awrap(n({variables:{feedId:e}}));case 2:case"end":return t.stop()}}),null,null,null,Promise)}),[n])},rc=function(){var e=function(e){var t=J(J({},K),e);return q.a(ue,t)}(),t=e.data,n=e.refetch,r=e.loading,c=e.error;return de(c),{users:Object(a.useMemo)((function(){return null==t?void 0:t.users}),[t]),refetch:n,loading:r,error:c}},cc=function(){var e=function(e){var t=J(J({},K),e);return N.a(ie,t)}(),t=ve()(e,2),n=t[0],r=t[1].error;return de(r),Object(a.useCallback)((function(e){return nn.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nn.a.awrap(n({variables:{email:e}}));case 2:case"end":return t.stop()}}),null,null,null,Promise)}),[n])},ac=function(){var e=function(e){var t=J(J({},K),e);return N.a(le,t)}(),t=ve()(e,2),n=t[0],r=t[1].error;return de(r),Object(a.useCallback)((function(e){return nn.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nn.a.awrap(n({variables:{userId:e}}));case 2:case"end":return t.stop()}}),null,null,null,Promise)}),[n])},oc=C.b.ScrollView(rr||(rr=U()(["\n  flex: 1;\n"]))),ic=function(e){var t=e.navigation,n=Mr(),r=n.profile,c=n.feeds,o=n.refetch,i=Object(a.useContext)($.a).logout,s=Zr(),u=Object(a.useState)(!1),l=ve()(u,2),b=l[0],d=l[1],j=Object(a.useState)(!1),f=ve()(j,2),O=f[0],x=f[1],p=Object(a.useState)(""),h=ve()(p,2),m=h[0],v=h[1],g=Object(a.useState)(""),y=ve()(g,2),w=y[0],P=y[1],S=$r(),k=cc(),C=Object(a.useCallback)((function(){var e,t,n,r,c,a,i;return nn.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,nn.a.awrap(wr.a({mediaTypes:Pr.a.All,quality:1,base64:!0}));case 2:if(!(e=s.sent).cancelled&&e.base64){s.next=5;break}return s.abrupt("return");case 5:return t=e.uri.split("/"),n=ve()(t,1),r=n[0],c=/\.(\w+)$/.exec(r),a=c?"image/"+c[1]:"image",i={type:a,name:r,uri:e.uri},s.next=11,nn.a.awrap(S(i));case 11:return s.next=13,nn.a.awrap(o());case 13:case"end":return s.stop()}}),null,null,null,Promise)}),[]),I=Object(a.useCallback)((function(){return nn.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn.a.awrap(s(w));case 2:return P(""),d(!1),e.next=6,nn.a.awrap(o());case 6:case"end":return e.stop()}}),null,null,null,Promise)}),[w,s]),T=Object(a.useCallback)((function(){return nn.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn.a.awrap(k(m));case 2:return v(""),x(!1),e.next=6,nn.a.awrap(o());case 6:case"end":return e.stop()}}),null,null,null,Promise)}),[m,k]);return Object(je.jsx)(qt,{children:Object(je.jsxs)(oc,{children:[Object(je.jsx)(yn,{title:"Profile"}),Object(je.jsx)(ht.b,{left:Object(je.jsx)(ht.a,{children:Object(je.jsx)(ot,{mediaId:(null==r?void 0:r.avatar)||void 0,onPress:C})}),title:(null==r?void 0:r.name)||(null==r?void 0:r.username)}),Object(je.jsxs)(Wt,{visible:b,onClose:function(){return d(!1)},children:[Object(je.jsx)(ht.b,{children:Object(je.jsx)(an,{label:"Name",value:w,onChangeText:P})}),Object(je.jsx)(ht.b,{children:Object(je.jsx)(ft,{title:"Save",onPress:I})})]}),Object(je.jsx)(Qt,{title:"My feeds",items:c,getKey:function(e){return e.feed.id},add:null!=r&&r.admin?function(){d(!0)}:void 0,render:function(e){return Object(je.jsx)(ht.b,{title:e.feed.name,overline:e.accessType,right:Object(je.jsx)(ht.a,{children:Object(je.jsx)(ft,{title:"Leave",type:"destructive"})}),onPress:function(){t.navigate("FeedEdit",{id:e.feed.id})}})}}),(null==r?void 0:r.admin)&&Object(je.jsxs)(Qt,{title:"Admin",children:[Object(je.jsx)(ht.b,{title:"Invite",onPress:function(){return x(!0)},left:Object(je.jsx)(ht.a,{children:Object(je.jsx)(nt.a,{name:"user-plus",color:"text"})})}),Object(je.jsx)(ht.b,{title:"Users",onPress:function(){return t.navigate("AdminUsers",{})},left:Object(je.jsx)(ht.a,{children:Object(je.jsx)(nt.a,{name:"users",color:"text"})}),right:Object(je.jsx)(ht.a,{children:Object(je.jsx)(nt.a,{name:"chevron-right",color:"text"})})}),Object(je.jsx)(ht.b,{title:"Feeds",onPress:function(){return t.navigate("AdminFeeds",{})},left:Object(je.jsx)(ht.a,{children:Object(je.jsx)(nt.a,{name:"layers",color:"text"})}),right:Object(je.jsx)(ht.a,{children:Object(je.jsx)(nt.a,{name:"chevron-right",color:"text"})})}),Object(je.jsxs)(Wt,{visible:O,onClose:function(){return x(!1)},children:[Object(je.jsx)(ht.b,{children:Object(je.jsx)(an,{label:"Email",value:m,onChangeText:v})}),Object(je.jsx)(ht.b,{children:Object(je.jsx)(ft,{title:"Send",onPress:T})})]})]}),Object(je.jsx)(ht.b,{children:Object(je.jsx)(ft,{title:"Logout",type:"destructive",onPress:i})})]})})},sc=[{key:"Admin",value:"admin"},{key:"Moderator",value:"moderator"},{key:"Writer",value:"writer"},{key:"Reader",value:"reader"}],uc=function(e){var t=e.route.params.id,n=Qr(t),r=n.feed,c=n.refetch,o=rc().users,i=tc(),s=ec(),u=Object(a.useState)(!1),l=ve()(u,2),b=l[0],d=l[1],j=Object(a.useState)(),f=ve()(j,2),O=f[0],x=f[1],p=Object(a.useState)(),h=ve()(p,2),m=h[0],v=h[1],g=Object(a.useCallback)((function(){return nn.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn.a.awrap(s(t,O.id,m.value));case 2:return x(void 0),v(void 0),d(!1),e.next=7,nn.a.awrap(c());case 7:case"end":return e.stop()}}),null,null,null,Promise)}),[t,O,m]),y=Object(a.useCallback)((function(e){return nn.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,nn.a.awrap(i(t,e));case 2:return n.next=4,nn.a.awrap(c());case 4:case"end":return n.stop()}}),null,null,null,Promise)}),[t,i,c]);return r?Object(je.jsxs)(qt,{children:[Object(je.jsx)(yn,{back:!0,title:"Feed"}),Object(je.jsx)(ht.b,{children:Object(je.jsx)(an,{label:"Name",value:r.name})}),Object(je.jsx)(Qt,{title:"Users",add:function(){d(!0)},items:r.users,getKey:function(e){return e.user.id},render:function(e){return Object(je.jsx)(ht.b,{overline:e.accessType,title:e.user.name||e.user.username,right:Object(je.jsx)(ht.a,{children:Object(je.jsx)(ft,{title:"Remove",onPress:function(){return y(e.user.id)}})})})}}),Object(je.jsxs)(Wt,{visible:b,onClose:function(){return d(!1)},children:[Object(je.jsx)(zr,{label:"User",selected:O,onSelect:function(e){return x(e)},users:o}),Object(je.jsx)(Dr,{label:"Access type",selected:m,onSelect:function(e){return v(e)},items:sc}),!!m&&!!O&&Object(je.jsx)(ht.b,{children:Object(je.jsx)(ft,{title:"Save",onPress:g})})]})]}):Object(je.jsx)(je.Fragment,{})},lc=n(159),bc=n.n(lc),dc=C.b.Image(cr||(cr=U()(["\n  width: 300px;\n  height: 300px;\n"]))),jc=C.b.View(ar||(ar=U()(["\n  flex: 1;\n  justify-content: center;\n  align-items: center;\n  background: ",";\n"])),(function(e){return e.theme.colors.shade})),fc=C.b.View(or||(or=U()(["\n  padding: 15px;\n  margin: 30px;\n  background: ",";\n  border-radius: 15px;\n"])),(function(e){return e.theme.colors.background})),Oc=C.b.Text(ir||(ir=U()([""]))),xc=function(e){e.navigation;var t=Object(a.useContext)($.a).login,n=Object(a.useState)(!1),r=ve()(n,2),c=r[0],o=r[1],i=Object(a.useState)(),s=ve()(i,2),u=s[0],l=s[1],b=Object(a.useState)(""),d=ve()(b,2),j=d[0],f=d[1],O=Object(a.useState)(""),x=ve()(O,2),p=x[0],h=x[1],m=Object(a.useState)(""),v=ve()(m,2),g=v[0],y=v[1],w=Object(a.useCallback)((function(){o(!0);nn.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn.a.awrap(t(j,p,g));case 2:o(!1);case 3:case"end":return e.stop()}}),null,null,null,Promise).catch((function(e){o(!1),l(e)}))}),[j,p,g]);return c?Object(je.jsx)(Oc,{children:"Loading"}):Object(je.jsx)(qt,{children:Object(je.jsx)(jc,{children:Object(je.jsxs)(fc,{children:[Object(je.jsx)(dc,{source:bc.a}),u&&Object(je.jsx)(Oc,{children:u.toString()}),Object(je.jsx)(ht.b,{left:Object(je.jsx)(ht.a,{children:Object(je.jsx)(nt.a,{name:"server"})}),children:Object(je.jsx)(an,{autoCorrect:!1,label:"Domain",value:j,onChangeText:f})}),Object(je.jsx)(ht.b,{left:Object(je.jsx)(ht.a,{children:Object(je.jsx)(nt.a,{name:"user"})}),children:Object(je.jsx)(an,{autoCorrect:!1,label:"Username",value:p,onChangeText:h})}),Object(je.jsx)(ht.b,{left:Object(je.jsx)(ht.a,{children:Object(je.jsx)(nt.a,{name:"key"})}),children:Object(je.jsx)(an,{secure:!0,label:"Secret",value:g,onChangeText:y})}),Object(je.jsx)(ht.b,{children:Object(je.jsx)(ft,{onPress:w,title:"Login"})})]})})})},pc=n(46),hc=C.b.Image(sr||(sr=U()(["\n  width: 300px;\n  height: 300px;\n"]))),mc=C.b.View(ur||(ur=U()(["\n  align-items: center;\n  justify-content: center;\n  padding: 0 20px;\n  flex: 1;\n"]))),vc=C.b.View(lr||(lr=U()(["\n  padding: 15px;\n  margin: 30px;\n  background: ",";\n  border-radius: 15px;\n"])),(function(e){return e.theme.colors.background})),gc=function(e){var t=e.route,n=(e.navigation,t.params.inviteCode),r=Object(a.useContext)($.a).acceptInvitation,c=Object(a.useState)(""),o=ve()(c,2),i=o[0],s=o[1],u=Object(a.useState)(""),l=ve()(u,2),b=l[0],d=l[1],j=Object(a.useState)(!1),f=ve()(j,2),O=f[0],x=f[1],p=Object(a.useState)(),h=ve()(p,2),m=(h[0],h[1]),v=Object(a.useCallback)((function(){x(!0);nn.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn.a.awrap(r(n,i,b));case 2:x(!1);case 3:case"end":return e.stop()}}),null,null,null,Promise).catch((function(e){x(!1),m(e)}))}),[n,i,b]);return O?Object(je.jsx)(pc.a,{children:"Loading"}):Object(je.jsx)(qt,{children:Object(je.jsx)(mc,{children:Object(je.jsxs)(vc,{children:[Object(je.jsx)(hc,{source:bc.a}),Object(je.jsx)(ht.b,{description:"You are almost there! Just pick your username and password and off we go!"}),Object(je.jsx)(ht.b,{left:Object(je.jsx)(ht.a,{children:Object(je.jsx)(nt.a,{name:"user"})}),children:Object(je.jsx)(an,{autoCorrect:!1,label:"Username",value:i,onChangeText:s})}),Object(je.jsx)(ht.b,{left:Object(je.jsx)(ht.a,{children:Object(je.jsx)(nt.a,{name:"key"})}),children:Object(je.jsx)(an,{secure:!0,label:"Password",value:b,onChangeText:d})}),Object(je.jsx)(ht.b,{children:Object(je.jsx)(ft,{onPress:v,title:"Let's GO"})})]})})})},yc=C.b.View(br||(br=U()(["\n  flex: 1;\n"]))),wc=C.b.View(dr||(dr=U()(["\n  flex: 1;\n"]))),Pc=function(e){var t=e.route.params.id,n=Object(i.d)(),r=Object(a.useState)(""),c=ve()(r,2),o=c[0],s=c[1],u=function(e){var t=J(J({},K),e);return N.a(W,t)}(),l=ve()(u,1)[0],b=function(e){var t=J(J({},K),e);return q.a(ee,t)}({variables:{postId:t}}),d=b.data,j=b.refetch,f=Object(a.useCallback)((function(){return nn.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn.a.awrap(l({variables:{params:{content:o,post:t}}}));case 2:return s(""),e.next=5,nn.a.awrap(j());case 5:case"end":return e.stop()}}),null,null,null,Promise)}),[o,t,l,j]);return Object(je.jsxs)(qt,{children:[Object(je.jsx)(yn,{title:"Comments"}),Object(je.jsxs)(wc,{style:{paddingBottom:n.bottom+20},children:[Object(je.jsx)(yc,{children:Object(je.jsx)(rn.a,{style:{flex:1},inverted:!0,keyExtractor:function(e){return e.id},renderItem:function(e){var t=e.item;return Object(je.jsx)(ht.b,{left:Object(je.jsx)(ht.a,{children:Object(je.jsx)(ot,{mediaId:t.creator.avatar||void 0})}),overline:t.creator.name||t.creator.username,description:t.content})},data:st()((null==d?void 0:d.post.comments)||[]).reverse()})}),Object(je.jsx)(ht.b,{right:Object(je.jsx)(ft,{title:"Send",onPress:f}),children:Object(je.jsx)(an,{label:" Say something...",value:o,onChangeText:s})})]})]})},Sc=function(){var e=Object(a.useState)(""),t=ve()(e,2),n=t[0],r=t[1],c=ac(),o=rc(),i=o.users,s=o.refetch,u=Object(a.useMemo)((function(){return(null==i?void 0:i.filter((function(e){return!n||(null==e?void 0:e.username.toLowerCase().includes(n.toLowerCase()))})))||[]}),[i,n]),l=Object(a.useCallback)((function(e){return nn.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:kn.a.alert("Are you sure?",void 0,[{text:"Yes",onPress:function(){return c(e).then((function(){return s()}))}},{text:"Cancel",style:"cancel"}]);case 1:case"end":return t.stop()}}),null,null,null,Promise)}),[]);return Object(je.jsxs)(qt,{children:[Object(je.jsx)(yn,{title:"Users",back:!0}),Object(je.jsx)(ht.b,{left:Object(je.jsx)(ht.a,{children:Object(je.jsx)(nt.a,{name:"search"})}),children:Object(je.jsx)(an,{label:"Search",value:n,onChangeText:r})}),Object(je.jsx)(rn.a,{data:u,keyExtractor:function(e){return e.id},renderItem:function(e){var t=e.item;return Object(je.jsx)(ht.b,{overline:t.username,title:t.name||t.username,left:Object(je.jsx)(ht.a,{children:Object(je.jsx)(ot,{mediaId:t.avatar||void 0})}),right:Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(ht.a,{children:Object(je.jsx)(nt.a,{name:"edit"})}),Object(je.jsx)(ht.a,{onPress:function(){return l(t.id)},children:Object(je.jsx)(nt.a,{name:"trash-2",color:"destructive"})})]})})}})]})},kc=function(e){var t=e.navigation,n=Object(a.useState)(""),r=ve()(n,2),c=r[0],o=r[1],i=nc(),s=Xr(),u=s.feeds,l=s.refetch,b=Object(a.useMemo)((function(){return(null==u?void 0:u.filter((function(e){return!c||(null==e?void 0:e.name.toLowerCase().includes(c.toLowerCase()))})))||[]}),[u,c]),d=Object(a.useCallback)((function(e){return nn.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:kn.a.alert("Are you sure?",void 0,[{text:"Yes",onPress:function(){return i(e).then((function(){return l()}))}},{text:"Cancel",style:"cancel"}]);case 1:case"end":return t.stop()}}),null,null,null,Promise)}),[]);return Object(je.jsxs)(qt,{children:[Object(je.jsx)(yn,{title:"Feeds",back:!0}),Object(je.jsx)(ht.b,{left:Object(je.jsx)(ht.a,{children:Object(je.jsx)(nt.a,{name:"search"})}),children:Object(je.jsx)(an,{label:"Search",value:c,onChangeText:o})}),Object(je.jsx)(rn.a,{data:b,keyExtractor:function(e){return e.id},renderItem:function(e){var n=e.item;return Object(je.jsx)(ht.b,{title:n.name,overline:n.users.length+" user(s), admins: "+n.users.filter((function(e){return"admin"===e.accessType})).map((function(e){return e.user.username})).join(", "),left:Object(je.jsx)(ht.a,{children:Object(je.jsx)(nt.a,{color:"text",name:"layers"})}),right:Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(ht.a,{onPress:function(){return t.navigate("FeedEdit",{id:n.id})},children:Object(je.jsx)(nt.a,{name:"edit"})}),Object(je.jsx)(ht.a,{onPress:function(){return d(n.id)},children:Object(je.jsx)(nt.a,{name:"trash-2",color:"destructive"})})]})})}})]})};function Cc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ic(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cc(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tc=Object(Ge.a)(),Fc=Object(Ke.a)(),Ec=Object(Ge.a)(),Ac=function(){return Object(je.jsxs)(Ec.Navigator,{screenOptions:{headerShown:!1},children:[Object(je.jsx)(Ec.Screen,{name:"ProfileMain",component:ic}),Object(je.jsx)(Ec.Screen,{name:"AdminUsers",component:Sc}),Object(je.jsx)(Ec.Screen,{name:"AdminFeeds",component:kc}),Object(je.jsx)(Ec.Screen,{name:"FeedEdit",component:uc})]})},zc=function(){var e=Object(C.c)(),t=Mr().profile,n=Object(a.useMemo)((function(){var e;return null==t||null==(e=t.feeds)?void 0:e.find((function(e){return"admin"===e.accessType||"moderator"===e.accessType||"writer"===e.accessType}))}),[t]);return Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(Vr,{}),Object(je.jsxs)(Fc.Navigator,{tabBar:function(e){return Object(je.jsx)(Kr,Ic({},e))},screenOptions:{headerShown:!1,tabBarActiveTintColor:e.colors.primary},children:[Object(je.jsx)(Fc.Screen,{name:"Feed",component:Gr,options:{title:"Posts",tabBarIcon:function(e){var t=e.focused;return Object(je.jsx)(nt.a,{color:t?"background":"text",name:"home",size:28})}}}),n&&Object(je.jsx)(Fc.Screen,{name:"Add",component:Ur,options:{title:"Add",tabBarIcon:function(e){var t=e.focused;return Object(je.jsx)(nt.a,{color:t?"background":"text",name:"plus-circle",size:28})}}}),Object(je.jsx)(Fc.Screen,{name:"Profile",component:Ac,options:{title:"Profile",tabBarIcon:function(e){var t=e.focused;return Object(je.jsx)(nt.a,{color:t?"background":"text",name:"user",size:28})}}})]})]})},Dc=function(){var e=Object(C.c)(),t=Object(a.useContext)($.a).domain;return Object(je.jsx)(Tc.Navigator,{screenOptions:{headerShown:!1},children:t?Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(Tc.Group,{children:Object(je.jsx)(Tc.Screen,{name:"Main",component:zc})}),Object(je.jsx)(Tc.Group,{screenOptions:{contentStyle:{backgroundColor:e.colors.shade},presentation:"modal"},children:Object(je.jsx)(Tc.Screen,{name:"Comments",component:Pc})})]}):Object(je.jsxs)(Tc.Group,{children:[Object(je.jsx)(Tc.Screen,{name:"Login",component:xc}),Object(je.jsx)(Tc.Screen,{initialParams:{inviteCode:""},name:"AcceptInvitation",component:gc})]})})},Vc=function(e){var t=e.colorScheme,n=Object(C.c)(),r=Object(a.useMemo)((function(){return"dark"===t?We.a:_e.a}),[t]),c=Object(a.useMemo)((function(){return Ic(Ic({},r),{},{colors:Ic(Ic({},r.colors),{},{background:n.colors.shade,card:n.colors.background,text:n.colors.text})})}),[r,n]);return Object(je.jsx)(Ye.a,{linking:Qe,theme:c,children:Object(je.jsx)(Dc,{})})},$c=n(166);c.init({dsn:"https://a13b4a62799a4225bf9072bedc4f41fa@o165705.ingest.sentry.io/6244307",enableInExpoDevelopment:!0,debug:!1}),r.a.getSizeWithHeaders||(r.a.getSizeWithHeaders=function(e,t,n,r){n(100,100)});t.a=function(){var e=Object(s.a)();return Object(je.jsx)(C.a,{theme:"dark"===e?Je:Ee,children:Object(je.jsx)(i.b,{children:Object(je.jsx)($c.b,{children:Object(je.jsxs)($.b,{children:[Object(je.jsx)(I.a,{style:"dark"===e?"light":"dark"}),Object(je.jsx)(Fe,{children:Object(je.jsx)(Vc,{colorScheme:e})})]})})})})}},264:function(e,t,n){e.exports=n(329)},33:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"e",(function(){return x})),n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return m}));var r,c,a,o,i,s,u,l,b=n(10),d=n.n(b),j=n(11),f=j.b.Text(r||(r=d()(["\n  color: ",";\n  font-weight: ",";\n  font-size: ","px;\n"])),(function(e){var t=e.color,n=e.theme;return t?n.colors[t]:n.colors.text}),(function(e){return e.bold?"bold":"normal"}),(function(e){return e.theme.font.baseSize})),O=Object(j.b)(f)(c||(c=d()(["\n  font-size: ","px;\n  font-weight: bold;\n"])),(function(e){return 2.8*e.theme.font.baseSize})),x=(Object(j.b)(f)(a||(a=d()(["\n  font-size: ","px;\n  font-weight: bold;\n"])),(function(e){return 1.3*e.theme.font.baseSize})),Object(j.b)(f)(o||(o=d()(["\n  font-weight: bold;\n"])))),p=Object(j.b)(f)(i||(i=d()([""]))),h=Object(j.b)(f)(s||(s=d()(["\n  font-size: ","px;\n  text-transform: uppercase;\n"])),(function(e){return.6*e.theme.font.baseSize})),m=(Object(j.b)(f)(u||(u=d()(["\n  font-size: ","px;\n"])),(function(e){return.8*e.theme.font.baseSize})),Object(j.b)(f)(l||(l=d()(["\n  text-transform: uppercase;\n"]))))},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return w}));var r=n(12),c=n.n(r),a=n(5),o=n.n(a),i=n(2),s=n.n(i),u=n(0),l=n(173),b=n(130),d=n(254),j=n(13),f=n(367),O=n(359),x=n(345),p=n(346),h=n(154),m=n(1);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=Object(u.createContext)(void 0),w=function(e){var t=e.children,n=Object(u.useState)(),r=o()(n,2),c=r[0],a=r[1],i=Object(h.a)(),v=i.show,w=(i.dismiss,Object(u.useState)()),P=o()(w,2),S=P[0],k=P[1],C=Object(u.useState)(),I=o()(C,2),T=I[0],F=I[1],E=Object(u.useState)(!1),A=o()(E,2),z=A[0],D=A[1],V=Object(u.useCallback)((function(){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.awrap(b.a.removeItem("_/server"));case 2:a(void 0);case 3:case"end":return e.stop()}}),null,null,null,Promise)}),[a]);Object(u.useEffect)((function(){c&&null!=S&&S.notifications.push&&function(){var e,t,n,r,c,a;return s.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!d.a||"web"===j.a.OS){o.next=19;break}return o.next=3,s.a.awrap(f.a());case 3:if(e=o.sent,t=e.status,n=t,"granted"===t){o.next=12;break}return o.next=9,s.a.awrap(f.b());case 9:r=o.sent,c=r.status,n=c;case 12:if("granted"===n){o.next=14;break}return o.abrupt("return");case 14:return o.next=16,s.a.awrap(O.a());case 16:return a=o.sent.data,"android"===j.a.OS&&x.a("default",{name:"default",importance:p.a.MAX,vibrationPattern:[0,250,250,250],lightColor:"#FF231F7C"}),o.abrupt("return",a);case 19:case"end":return o.stop()}}),null,null,null,Promise)}().then(F)}),[c,S]);var $=Object(u.useCallback)((function(e,t,n){var r,c,o,i;return s.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return r=e+"/graphql",u.next=3,s.a.awrap(fetch(r,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({query:"\n            mutation CreateAuthToken($secret: String!, $username: String!) {\n              createAuthToken(secret: $secret, username: $username)\n            } \n          ",variables:{username:t,secret:n}})}));case 3:if((c=u.sent).ok){u.next=12;break}return u.t0=v,u.next=8,s.a.awrap(c.text());case 8:throw u.t1=u.sent,u.t2={type:"error",text:u.t1},(0,u.t0)(u.t2),new Error("failed");case 12:return u.next=14,s.a.awrap(c.json());case 14:return o=u.sent,i={token:o.data.createAuthToken,domain:e},a(i),u.next=19,s.a.awrap(b.a.setItem("_/server",JSON.stringify(i)));case 19:case"end":return u.stop()}}),null,null,null,Promise)}),[v]),M=Object(u.useCallback)((function(e,t,n,r){var c,o,i,u,d,j,f,O;return s.a.async((function(x){for(;;)switch(x.prev=x.next){case 0:return c=l.Buffer.from(e,"base64").toString("utf-8"),o=JSON.parse(c),i=o.creationToken,u=o.domain,d=u+"/api/accept-invitation",x.next=5,s.a.awrap(fetch(d,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:t,secret:n,creationToken:i,name:r})}));case 5:if((j=x.sent).ok){x.next=12;break}return x.t0=Error,x.next=10,s.a.awrap(j.text());case 10:throw x.t1=x.sent,new x.t0(x.t1);case 12:return x.next=14,s.a.awrap(j.json());case 14:return f=x.sent,O={token:f.token,domain:u},a(O),x.next=19,s.a.awrap(b.a.setItem("_/server",JSON.stringify(O)));case 19:case"end":return x.stop()}}),null,null,null,Promise)}),[]);return Object(u.useEffect)((function(){(function(){var e,t,n;return s.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.a.awrap(b.a.getItem("_/server"));case 2:if(!(e=r.sent)){r.next=29;break}return t=JSON.parse(e),r.prev=5,r.next=8,s.a.awrap(fetch(t.domain+"/api/config",{headers:{Authorization:"Bearer "+t.token}}));case 8:if(!(n=r.sent).ok){r.next=18;break}return r.t0=k,r.next=13,s.a.awrap(n.json());case 13:r.t1=r.sent,(0,r.t0)(r.t1),a(JSON.parse(e)),r.next=24;break;case 18:return r.t2=v,r.next=21,s.a.awrap(n.text());case 21:r.t3=r.sent,r.t4={type:"error",text:r.t3},(0,r.t2)(r.t4);case 24:r.next=29;break;case 26:r.prev=26,r.t5=r.catch(5),v({type:"error",text:r.t5.message});case 29:D(!0);case 30:case"end":return r.stop()}}),null,null,[[5,26]],Promise)})().catch((function(){D(!0)}))}),[]),z?Object(m.jsx)(y.Provider,{value:g(g({},c),{},{config:S,pushToken:T,logout:V,login:$,acceptInvitation:M}),children:t}):Object(m.jsx)(m.Fragment,{})}},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(0);var r=n(331),c=n(11),a=n(1);function o(e){var t=e.size,n=e.color,o=e.name,i=Object(c.c)();return Object(a.jsx)(r.a,{name:o,color:n?i.colors[n]:i.colors.icon,size:null!=t?t:i.sizes.icons})}},92:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var r,c,a=n(5),o=n.n(a),i=n(10),s=n.n(i),u=n(2),l=n.n(u),b=n(34),d=n(11),j=n(0),f=n(1),O=d.b.View(r||(r=s()(["\n  height: ","px;\n  width: 100%;\n"])),(function(e){return e.height})),x=d.b.Image(c||(c=s()(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background: #ccc;\n"]))),p=function(t){var n=t.media,r=Object(j.useContext)(b.a),c=r.domain,a=r.token,i=Object(j.useState)(0),s=o()(i,2),u=s[0],d=s[1],p=Object(j.useState)(),h=o()(p,2),m=h[0],v=h[1];return Object(j.useEffect)((function(){!function(){var t,r,o,i;l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,l.a.awrap(fetch(c+"/api/thumb/"+n.id,{headers:{Authorization:"bearer "+a}}));case 2:return t=s.sent,s.next=5,l.a.awrap(t.arrayBuffer());case 5:r=s.sent,o=t.headers.get("content-type"),i=e.from(r).toString("base64"),v("data:"+(o||"image/jpeg")+";base64,"+i);case 10:case"end":return s.stop()}}),null,null,null,Promise)}()}),[c,a,n.id]),Object(f.jsx)(O,{height:u/n.aspect,onLayout:function(e){var t=e.nativeEvent.layout.width;t!==u&&d(t)},children:Object(f.jsx)(x,{source:{uri:m}})})}}).call(this,n(173).Buffer)}},[[264,1,2]]]);
//# sourceMappingURL=app.dba9be17.chunk.js.map