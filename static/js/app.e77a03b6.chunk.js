(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{142:function(e,t,n){e.exports=n.p+"static/media/tourist.e3fa36f8.png"},228:function(e,t,n){"use strict";var r=n(38),c=n(343),a=n(121);var o=n(11),i=n(231),s=n(9),u=n.n(s),l=n(230),b=n(236),j=n(338),d=n(326),f=n(212),O=n(0),p=n(30),x=n(1);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){var t=e.children,n=Object(O.useContext)(p.a),r=n.token,c=n.domain,a=Object(O.useMemo)((function(){var e=Object(l.a)({uri:c+"/graphql"}),t=Object(f.a)((function(e,t){return{headers:m(m({},t.headers),{},{authorization:"bearer "+r})}}));return new b.a({cache:new j.a,link:t.concat(e)})}),[r,c]);return Object(x.jsx)(d.a,{client:a,children:t})},g={colors:{primary:"#1abc9c",icon:"#1abc9c",destructive:"#e74c3c",shade:"#ededed",input:"#ddd",secondary:"blue",shadow:"#000",background:"#fff",text:"#000",textShade:"#999"},sizes:{corners:5,icons:24},margins:{small:8,medium:16,large:24},font:{baseSize:14}};function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P,S,k=w(w({},g),{},{colors:w(w({},g.colors),{},{primary:"#e67e22",input:"#333",icon:"#e67e22",background:"#151515",shadow:"#000",secondary:"blue",shade:"#000",text:"#fff",textShade:"#666"})}),C=n(335),I=n(333),T=n(146),z=n(334),E=n(339),F={prefixes:["pictoroma://"],screens:{AcceptInvitation:"login/accept-invite"}},D=n(10),A=n.n(D),$=n(347),V=Object(o.b)($.a)(P||(P=A()(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  z-index: 100;\n  align-items: center;\n  justify-content: center;\n"]))),M=o.b.ActivityIndicator(S||(S=A()(["\n  \n"]))),L=function(){return Object(x.jsx)(V,{intensity:20,children:Object(x.jsx)(M,{})})},N=n(327);function R(e){var t=e.size,n=e.color,r=e.name,c=Object(o.c)();return Object(x.jsx)(N.a,{name:r,color:n?c.colors[n]:c.colors.icon,size:null!=t?t:c.sizes.icons})}var q,B,U,J,H,K,W,G,Y,_,X,Q,Z,ee,te,ne=n(82),re=o.b.TouchableOpacity(q||(q=A()([""]))),ce=o.b.View(B||(B=A()(["\n  position: relative;\n  width: 50px;\n  height: 50px;\n  border-radius: 25px;\n  overflow: hidden;\n  align-items: center;\n  justify-content: center;\n"]))),ae=function(e){var t=e.mediaId,n=e.onPress,r=Object(x.jsx)(ce,{children:t?Object(x.jsx)(ne.a,{media:{aspect:1,id:t}}):Object(x.jsx)(R,{name:"user"})});return n?Object(x.jsx)(re,{onPress:n,children:r}):r},oe=n(19),ie=n.n(oe),se=n(5),ue=n.n(se),le=o.b.Text(U||(U=A()(["\n  color: ",";\n  font-weight: ",";\n  font-size: ","px;\n"])),(function(e){var t=e.color,n=e.theme;return t?n.colors[t]:n.colors.text}),(function(e){return e.bold?"bold":"normal"}),(function(e){return e.theme.font.baseSize})),be=Object(o.b)(le)(J||(J=A()(["\n  font-size: ","px;\n  font-weight: bold;\n"])),(function(e){return 2.8*e.theme.font.baseSize})),je=(Object(o.b)(le)(H||(H=A()(["\n  font-size: ","px;\n  font-weight: bold;\n"])),(function(e){return 1.3*e.theme.font.baseSize})),Object(o.b)(le)(K||(K=A()(["\n  font-weight: bold;\n"])))),de=Object(o.b)(le)(W||(W=A()([""]))),fe=Object(o.b)(le)(G||(G=A()(["\n  font-size: ","px;\n  text-transform: uppercase;\n"])),(function(e){return.6*e.theme.font.baseSize})),Oe=(Object(o.b)(le)(Y||(Y=A()(["\n  font-size: ","px;\n"])),(function(e){return.8*e.theme.font.baseSize})),Object(o.b)(le)(_||(_=A()(["\n  text-transform: uppercase;\n"])))),pe=o.b.TouchableOpacity(X||(X=A()([""]))),xe=function(e,t){return"secondary"===e?{bg:t.colors.secondary,fg:"#fff"}:"destructive"===e?{bg:"transparent",fg:t.colors.destructive}:{bg:t.colors.primary,fg:"#fff"}},he=o.b.View(Q||(Q=A()(["\n  background: ",";\n  padding: ","px;\n  border-radius: ","px;\n  align-items: center;\n"])),(function(e){var t=e.theme,n=e.type;return xe(n,t).bg}),(function(e){return e.theme.margins.small}),(function(e){return e.theme.sizes.corners})),me=Object(o.b)(Oe)(Z||(Z=A()(["\n  color: ",";\n  font-weight: bold;\n"])),(function(e){var t=e.theme,n=e.type;return xe(n,t).fg})),ve=function(e){var t=e.title,n=e.onPress,r=e.accessibilityHint,c=e.accessibilityRole,a=e.accessibilityLabel,o=e.type;return Object(x.jsx)(pe,{onPress:n,accessible:!0,accessibilityHint:r,accessibilityRole:c,accessibilityLabel:a,children:Object(x.jsx)(he,{type:o,children:Object(x.jsx)(me,{type:o,children:t})})})},ge=n(56),ye=n.n(ge),we=function(e){var t=e.visible,n=e.children,r=Object(O.useMemo)((function(){var e=document.createElement("div");return e.style.position="fixed",e.style.display="flex",e.style.flexDirection="column",e.style.left="0px",e.style.top="0px",e.style.width="100%",e.style.height="100%",e.style.transition="transform 0.3s",e.style.transform="translateY(100%)",e}),[]);return Object(O.useEffect)((function(){return document.body.appendChild(r),function(){document.body.removeChild(r)}}),[r]),Object(O.useEffect)((function(){r.style.transform=t?"translateY(0)":"translateY(100%)"}),[r,t]),ye.a.createPortal(Object(x.jsx)(x.Fragment,{children:n}),r)},Pe=n(14),Se=n.n(Pe),ke=["children","onPress"],Ce=["accessibilityLabel","accessibilityRole","accessibilityHint"];function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ze,Ee,Fe,De,Ae,$e,Ve,Me,Le=o.b.View(ee||(ee=A()(["\n  padding: ","px\n    ","px;\n  ","\n  ","\n  flex-direction: ",";\n  align-items: ",";\n"])),(function(e){return e.theme.margins.medium/2}),(function(e){return e.theme.margins.medium/2}),(function(e){var t=e.background;return t?"background: "+t+";":""}),(function(e){var t=e.flex;return t?"flex: "+t+";":""}),(function(e){var t=e.direction;return t||"row"}),(function(e){var t=e.align;return t||"center"})),Ne=o.b.TouchableOpacity(te||(te=A()([""]))),Re=function(e){var t=e.children,n=e.onPress,r=Se()(e,ke),c=r.accessibilityLabel,a=r.accessibilityRole,o=r.accessibilityHint,i=Se()(r,Ce),s=Object(x.jsx)(Le,Te(Te({},i),{},{children:t}));return n?Object(x.jsx)(Ne,{accessible:!0,accessibilityRole:a||"button",accessibilityLabel:c,accessibilityHint:o,onPress:n,children:s}):s},qe=(o.b.View(ze||(ze=A()(["\n  background: ",";\n  width: ","px;\n  height: ","px;\n  border-radius: ","px;\n"])),(function(e){return e.color}),(function(e){return e.size}),(function(e){return e.size}),(function(e){return e.size/4})),o.b.View(Ee||(Ee=A()([""])))),Be=function(e,t){return e?"string"===typeof e?Object(x.jsx)(t,{children:e}):e:null},Ue=function(e){var t=e.background,n=e.top,r=e.left,c=e.right,a=e.title,o=e.overline,i=e.description,s=e.children,u=e.onPress;return Object(x.jsxs)(Re,{background:t,onPress:u,children:[r,Object(x.jsxs)(Re,{flex:1,direction:"column",align:"stretch",children:[!!n,Be(o,fe),Be(a,je),Be(i,de),!!s&&Object(x.jsx)(qe,{children:s})]}),c]})},Je=n(61),He=n(12),Ke=o.b.KeyboardAvoidingView(Fe||(Fe=A()(["\n  flex: 1;\n"]))),We=o.b.Pressable(De||(De=A()(["\n  flex: 1;\n"]))),Ge=function(e){var t=e.children,n=e.loading,r=Object(O.useState)(!1),c=ue()(r,2),a=c[0],o=c[1];return Object(O.useEffect)((function(){var e=Je.a.addListener("keyboardDidShow",(function(){return o(!0)})),t=Je.a.addListener("keyboardDidHide",(function(){return o(!1)}));return function(){e.remove(),t.remove()}}),[]),Object(x.jsx)(We,{disabled:!a,onPress:function(){return Je.a.dismiss()},children:Object(x.jsxs)(Ke,{behavior:"ios"===He.a.OS?"padding":"height",children:[n&&Object(x.jsx)(L,{}),t]})})},Ye=o.b.Pressable(Ae||(Ae=A()(["\n  flex: 1;\n"]))),_e=o.b.View($e||($e=A()(["\n  background: ",";\n  width: 100%;\n  shadow-color: ",";\n  shadow-offset: 0 0;\n  shadow-opacity: 1;\n  shadow-radius: 200px;\n  border-radius: 12px;\n  margin-bottom: -12px;\n"])),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.shadow})),Xe=o.b.View(Ve||(Ve=A()(["\n  flex: 1;\n"]))),Qe=function(e){var t=e.visible,n=e.children,r=e.onClose,a=Object(c.d)();return Object(x.jsx)(we,{visible:t,transparent:!0,animationType:"slide",children:Object(x.jsx)(Ge,{children:Object(x.jsxs)(Xe,{children:[Object(x.jsx)(Ye,{onPress:r}),Object(x.jsxs)(_e,{style:{paddingBottom:a.bottom+12},children:[Object(x.jsx)(Ue,{right:Object(x.jsx)(Re,{onPress:r,children:Object(x.jsx)(R,{name:"x-circle"})})}),n]})]})})})},Ze=function(e){var t=e.selected,n=void 0===t?[]:t,r=e.feeds,c=void 0===r?[]:r,a=e.onSelect,o=Object(O.useState)(!1),i=ue()(o,2),s=i[0],u=i[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Re,{onPress:function(){return u(!0)},children:Object(x.jsx)(R,{name:"filter",color:n.length>0?"primary":"text"})}),Object(x.jsxs)(Qe,{visible:s,onClose:function(){return u(!1)},children:[c.map((function(e){var t=n.includes(e.id);return Object(x.jsx)(Ue,{onPress:t?function(){return a(n.filter((function(t){return t!==e.id})))}:function(){return a([].concat(ie()(n),[e.id]))},left:Object(x.jsx)(Re,{children:Object(x.jsx)(R,{name:t?"check-circle":"circle"})}),title:e.name},e.id)})),n.length>0&&Object(x.jsx)(Ue,{children:Object(x.jsx)(ve,{title:"Clear",onPress:function(){return a([])}})})]})]})};function et(e){var t=e.title,n=e.add,r=e.onPress,c=e.left;return Object(x.jsx)(Ue,{onPress:r,left:c,title:t,right:n&&Object(x.jsx)(Re,{onPress:n,children:Object(x.jsx)(R,{name:"plus-circle",size:18})})})}var tt=o.b.View(Me||(Me=A()(["\n  border-radius: 7px;\n  background: ",";\n  shadow-offset: 0px;\n  shadow-opacity: 0.1;\n  shadow-color: ",";\n  shadow-radius: 5px;\n"])),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.shadow}));function nt(e){var t=Object(O.useState)(!0),n=ue()(t,2),r=n[0],c=n[1],a=e,o=a.title,i=a.items,s=a.getKey,u=a.render,l=a.add,b=a.children;return Object(x.jsx)(Ue,{children:Object(x.jsxs)(tt,{children:[Object(x.jsx)(et,{left:Object(x.jsx)(R,{name:r?"chevron-down":"chevron-up",size:18}),title:o,add:l,onPress:function(){return c(!r)}}),r&&i&&i.map((function(e){return Object(x.jsx)(O.Fragment,{children:u(e)},s(e))})),r&&b,r&&!b&&(!i||0===i.length)&&Object(x.jsx)(Ue,{left:Object(x.jsx)(Re,{children:Object(x.jsx)(R,{color:"textShade",name:"maximize"})}),children:Object(x.jsx)(de,{style:{marginLeft:10},color:"textShade",children:"Empty"})})]})})}var rt,ct,at,ot=n(2),it=n.n(ot),st=n(71),ut=o.b.TextInput(rt||(rt=A()(["\n  color: ",";\n  padding: ","px 0;\n  font-size: ","px;\n  width: 100%;\n"])),(function(e){return e.theme.colors.text}),(function(e){return e.theme.margins.small}),(function(e){return e.theme.font.baseSize})),lt=function(e){var t=e.label,n=e.value,r=e.onChangeText,c=e.type,a=e.autoCorrect,i=e.secure,s=Object(o.c)();return Object(x.jsx)(ut,{value:n,keyboardType:c,autoCapitalize:"none",autoCorrect:a,secureTextEntry:i,placeholderTextColor:s.colors.textShade,placeholder:t,onChangeText:r})},bt=o.b.TouchableOpacity(ct||(ct=A()([""]))),jt=o.b.View(at||(at=A()(["\n  min-height: 40%;\n"])));function dt(e){var t=e.visible,n=e.onClose,r=e.items,c=e.onSelect,a=e.renderSelect,o=e.getKey,i=e.search,s=e.create,u=e.allowClear,l=Object(O.useState)(""),b=ue()(l,2),j=b[0],d=b[1],f=Object(O.useMemo)((function(){return i&&j?i(j,r):r}),[r,j,i]),p=Object(O.useCallback)((function(){d(""),n()}),[d,n]),h=Object(O.useCallback)((function(e){c(e),p()}),[c,p]),m=Object(O.useCallback)((function(){var e;return it.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(s){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,it.a.awrap(s(j));case 4:e=t.sent,c(e),p();case 7:case"end":return t.stop()}}),null,null,null,Promise)}),[s,j,p]);return Object(x.jsxs)(Qe,{visible:t,onClose:p,children:[i&&Object(x.jsx)(Ue,{children:Object(x.jsx)(lt,{label:"Search",value:j,onChangeText:d})}),Object(x.jsxs)(jt,{children:[s&&0===f.length&&j&&Object(x.jsx)(Ue,{children:Object(x.jsx)(ve,{title:"Create "+j,onPress:m})}),f.length>0&&Object(x.jsx)(st.a,{data:f,keyExtractor:o,style:{flex:1},renderItem:function(e){var t=e.item;return Object(x.jsx)(bt,{onPress:function(){return h(t)},children:a(t)})}}),u&&Object(x.jsx)(Ue,{children:Object(x.jsx)(ve,{title:"Clear",onPress:function(){return h(void 0)}})})]})]})}var ft,Ot,pt,xt,ht,mt,vt,gt,yt,wt,Pt,St,kt,Ct,It,Tt,zt,Et,Ft,Dt,At,$t,Vt=n(31),Mt=n(328),Lt=o.b.View(ft||(ft=A()([""]))),Nt=function(e){var t=e.title,n=e.back,r=e.actions,a=e.right,o=Object(Vt.p)(),i=Object(c.d)();return Object(x.jsx)(Lt,{style:{paddingTop:i.top},children:Object(x.jsx)(Ue,{left:!!n&&Object(x.jsx)(Re,{onPress:function(){return o.goBack()},children:Object(x.jsx)(Mt.a,{name:"arrow-back-circle",size:26})}),right:(r||a)&&Object(x.jsxs)(x.Fragment,{children:[r&&r.map((function(e){return Object(x.jsx)(ve,{title:e.title,onPress:e.onPress},e.title)})),a]}),children:Object(x.jsx)(be,{children:t})})})},Rt=n(229),qt=n(234),Bt=n(340),Ut=n(109),Jt=o.b.ScrollView(Ot||(Ot=A()(["\n  height: ","px;\n  width: 100%;\n"])),(function(e){return e.height})),Ht=o.b.View(pt||(pt=A()(["\n  flex-direction: row;\n"]))),Kt=o.b.TouchableWithoutFeedback(xt||(xt=A()([""]))),Wt=o.b.View(ht||(ht=A()(["\n  width: ","px;\n"])),(function(e){return e.width})),Gt=o.b.View(mt||(mt=A()(["\n  border-radius: 5px;\n  overflow: hidden;\n"]))),Yt=o.b.View(vt||(vt=A()(["\n  margin-top: 10px;\n  flex-direction: row;\n  justify-content: center;\n  width: 100%;\n"]))),_t=o.b.View(gt||(gt=A()(["\n  width: 6px;\n  height: 6px;\n  background: ",";\n  margin: 0 5px;\n  border-radius: 3px;\n"])),(function(e){var t=e.selected,n=e.theme;return t?n.colors.primary:"#ccc"})),Xt=function(e){var t=e.current,n=e.total,r=Object(O.useMemo)((function(){return new Array(n).fill(void 0).map((function(e,t){return t}))}),[n]);return Object(x.jsx)(Yt,{children:r.map((function(e){return Object(x.jsx)(_t,{selected:e===t},e)}))})},Qt=function(e){var t=e.media,n=Object(O.useState)(0),r=ue()(n,2),c=r[0],a=r[1],i=Object(O.useState)(0),s=ue()(i,2),u=s[0],l=s[1],b=function(){var e=Object(O.useContext)(p.a).token;return Object(O.useCallback)((function(t){var n,r;return it.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,n=Bt.b(t,Bt.a+"download.jpeg",{headers:{Authorization:"bearer: "+e}}),c.next=4,it.a.awrap(n.downloadAsync());case 4:if(r=c.sent){c.next=7;break}throw new Error("failed");case 7:qt.a(r.uri),Ut.a.alert("Image saved"),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(0),Ut.a.alert("Failed: "+c.t0.toString());case 14:case"end":return c.stop()}}),null,null,[[0,11]],Promise)}),[e])}(),j=Object(O.useContext)(p.a),d=j.domain,f=j.token,h=Object(O.useMemo)((function(){return Math.round(u/c)||0}),[u,c]),m=Object(O.useState)(!1),v=ue()(m,2),g=v[0],y=v[1],w=Object(O.useMemo)((function(){return t.map((function(e){return{uri:d+"/api/media/"+(null==e?void 0:e.id),headers:{Authorization:"Bearer "+f}}}))}),[d,f,t]),P=Object(O.useMemo)((function(){return t[h]}),[t,h]),S=Object(O.useMemo)((function(){return(null==P?void 0:P.aspect)||1}),[P]);if(0===t.length)return Object(x.jsx)(x.Fragment,{});var C=function(){return Object(x.jsx)(Rt.a,{images:w,imageIndex:h,visible:g,onRequestClose:function(){return y(!1)},FooterComponent:function(){return Object(x.jsxs)(o.a,{theme:k,children:[Object(x.jsx)(Ue,{right:Object(x.jsx)(Re,{onPress:function(){return b(w[h].uri)},children:Object(x.jsx)(R,{name:"download"})})}),Object(x.jsx)(Ue,{})]})}})};return 1===t.length?Object(x.jsxs)(Ue,{children:[Object(x.jsx)(C,{}),Object(x.jsx)(Kt,{onPress:function(){return y(!0)},children:Object(x.jsx)(Gt,{children:Object(x.jsx)(ne.a,{media:t[0]})})})]}):Object(x.jsxs)(Ue,{children:[Object(x.jsx)(C,{}),Object(x.jsx)(Gt,{children:Object(x.jsx)(Jt,{horizontal:!0,scrollEventThrottle:16,snapToInterval:c,showsHorizontalScrollIndicator:!1,decelerationRate:0,snapToAlignment:"center",disableIntervalMomentum:!0,height:c/S,onScroll:function(e){var t=e.nativeEvent.contentOffset.x;l(t)},onLayout:function(e){var t=e.nativeEvent.layout.width;t!==c&&a(t)},children:Object(x.jsx)(Kt,{onPress:function(){return y(!0)},children:Object(x.jsx)(Ht,{children:t.map((function(e){return Object(x.jsx)(Wt,{width:c,children:Object(x.jsx)(ne.a,{media:e})},e.id)}))})})})}),Object(x.jsx)(Xt,{current:h,total:t.length})]})},Zt=n(337),en=n(329),tn=n(221);n(330);function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cn={},an=Object(Zt.a)(yt||(yt=A()(["\n    mutation CreateComment($params: CommentCreateParameters!) {\n  createComment(params: $params) {\n    id\n  }\n}\n    "])));Object(Zt.a)(wt||(wt=A()(["\n    query Feeds {\n  feeds {\n    id\n    name\n    posts {\n      id\n      body\n      media {\n        id\n      }\n    }\n  }\n}\n    "])));var on=Object(Zt.a)(Pt||(Pt=A()(["\n    query Feed($feedId: String!) {\n  feed(id: $feedId) {\n    id\n    name\n    users {\n      accessType\n      user {\n        id\n        name\n        username\n      }\n    }\n  }\n}\n    "])));var sn=Object(Zt.a)(St||(St=A()(["\n    mutation CreateFeed($name: String!) {\n  createFeed(name: $name) {\n    id\n  }\n}\n    "])));var un=Object(Zt.a)(kt||(kt=A()(["\n    mutation AddUserToFeed($accessType: String!, $userId: String!, $feedId: String!) {\n  addUserToFeed(accessType: $accessType, userId: $userId, feedId: $feedId) {\n    accessType\n  }\n}\n    "])));var ln=Object(Zt.a)(Ct||(Ct=A()(["\n    mutation RemoveUserFromFeed($userId: String!, $feedId: String!) {\n  removeUserFromFeed(userId: $userId, feedId: $feedId)\n}\n    "])));var bn=Object(Zt.a)(It||(It=A()(["\n    query Post($postId: String!) {\n  post(id: $postId) {\n    id\n    creator {\n      id\n      name\n      avatar\n      username\n    }\n    created\n    comments {\n      id\n      creator {\n        username\n        name\n        id\n        avatar\n      }\n      content\n      created\n    }\n    media {\n      id\n      contentType\n      lowres\n      aspect\n      order\n      created\n      type\n    }\n  }\n}\n    "])));var jn=Object(Zt.a)(Tt||(Tt=A()(["\n    query Posts($filter: PostFindParameters!) {\n  posts(filter: $filter) {\n    id\n    body\n    commentCount\n    creator {\n      name\n      username\n      avatar\n    }\n    created\n    media {\n      id\n      aspect\n      type\n    }\n  }\n}\n    "])));var dn=Object(Zt.a)(zt||(zt=A()(["\n    mutation CreatePost($params: PostCreateParameters!) {\n  createPost(params: $params) {\n    id\n  }\n}\n    "])));var fn=Object(Zt.a)(Et||(Et=A()(["\n    mutation RemovePost($removePostId: String!) {\n  removePost(id: $removePostId)\n}\n    "])));var On=Object(Zt.a)(Ft||(Ft=A()(["\n    query Profile {\n  profile {\n    id\n    username\n    name\n    admin\n    avatar\n    feeds {\n      feed {\n        id\n        name\n      }\n      accessType\n    }\n  }\n}\n    "])));function pn(e){var t=rn(rn({},cn),e);return tn.a(On,t)}var xn=Object(Zt.a)(Dt||(Dt=A()(["\n    mutation SetProfileAvatar($mediaId: String) {\n  setProfileAvatar(mediaId: $mediaId) {\n    id\n  }\n}\n    "])));var hn=Object(Zt.a)(At||(At=A()(["\n    mutation RegisterPushNotification($token: String!) {\n  registerPushNotification(token: $token) {\n    id\n  }\n}\n    "])));var mn=Object(Zt.a)($t||($t=A()(["\n    query Users {\n  users {\n    id\n    name\n    username\n    avatar\n  }\n}\n    "])));var vn=["data"];function gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gn(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wn=Object(O.createContext)(void 0),Pn=function(e){var t=e.children,n=Object(O.useState)([]),r=ue()(n,2),c=r[0],a=r[1],o=function(e){var t=rn(rn({},cn),e);return tn.a(jn,t)}({variables:{filter:{feeds:c.length>0?c:void 0}}}),i=o.data,s=Se()(o,vn),u=Object(O.useMemo)((function(){return(null==i?void 0:i.posts)||[]}),[i]),l=Object(O.useMemo)((function(){return yn(yn({},s),{},{data:i,feeds:c,posts:u,setFeeds:a})}),[s,i,c,a]);return Object(x.jsx)(wn.Provider,{value:l,children:t})};function Sn(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kn(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Cn,In,Tn=function(){var e=Object(O.useContext)(p.a),t=e.domain,n=e.token;return Object(O.useCallback)((function(e){var r,c,a,o,i,s,u;return it.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:r=[],c=Sn(e);case 2:if((a=c()).done){l.next=22;break}return o=a.value,(i=new FormData).append("media",o),l.next=8,it.a.awrap(fetch(t+"/api/media",{method:"POST",body:i,headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+n}}));case 8:if((s=l.sent).ok){l.next=16;break}return l.t0=console,l.next=13,it.a.awrap(s.text());case 13:throw l.t1=l.sent,l.t0.error.call(l.t0,l.t1),new Error("Could not upload image");case 16:return l.next=18,it.a.awrap(s.json());case 18:u=l.sent,r.push(u.ids[0]);case 20:l.next=2;break;case 22:return l.abrupt("return",r);case 24:case"end":return l.stop()}}),null,null,null,Promise)}),[n,t])},zn=o.b.View(Cn||(Cn=A()(["\n  background: ",";\n  margin: 5px;\n  border-radius: 5px;\n"])),(function(e){return e.theme.colors.destructive})),En=function(e){var t=e.notification,n=e.dismiss;return Object(x.jsx)(zn,{children:Object(x.jsx)(Ue,{description:t.text,right:Object(x.jsx)(Re,{onPress:n,children:Object(x.jsx)(R,{name:"x",color:"text"})})})})};function Fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fn(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var An,$n,Vn,Mn,Ln,Nn,Rn,qn=Object(O.createContext)(void 0),Bn=o.b.View(In||(In=A()(["\n  position: absolute;\n  top: ","px;\n  width: 100%;\n  z-index: 1000;\n"])),(function(e){return e.top})),Un=0,Jn=function(e){var t=e.children,n=Object(O.useState)([]),r=ue()(n,2),a=r[0],o=r[1],i=Object(c.d)(),s=Object(O.useCallback)((function(e){var t=Un++;return o((function(n){return[].concat(ie()(n),[Dn(Dn({},e),{},{id:t})])})),t}),[o]),u=Object(O.useCallback)((function(e){o((function(t){return t.filter((function(t){return t.id!==e}))}))}),[o]),l=Object(O.useMemo)((function(){return{show:s,dismiss:u}}),[s,u]);return Object(x.jsxs)(qn.Provider,{value:l,children:[a.length>0&&Object(x.jsx)(Bn,{top:i.top,children:a.map((function(e,t){return Object(x.jsx)(En,{dismiss:function(){return u(e.id)},notification:e},t)}))}),t]})},Hn=function(){return Object(O.useContext)(qn)},Kn=function(){var e=Object(O.useContext)(p.a),t=e.domain,n=e.token,r=Hn(),c=r.show,a=r.dismiss,o=function(e){var t=rn(rn({},cn),e);return en.a(dn,t)}(),i=ue()(o,2),s=i[0],u=i[1].error;Object(O.useEffect)((function(){if(u){var e=c({type:"error",text:u.message});return function(){a(e)}}}),[u,c,a]);var l=Tn();return Object(O.useCallback)((function(e,t,n){var r;return it.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,it.a.awrap(l(n));case 2:return r=c.sent,c.next=5,it.a.awrap(s({variables:{params:{feed:e,body:t,media:r}}}));case 5:case"end":return c.stop()}}),null,null,null,Promise)}),[s,n,t])},Wn=function(){var e=Object(O.useState)(!1),t=ue()(e,2),n=t[0],r=t[1],c=Gn().refetch,a=function(e){var t=rn(rn({},cn),e);return en.a(fn,t)}(),o=ue()(a,2),i=o[0],s=o[1].error,u=Hn(),l=u.show,b=u.dismiss;return Object(O.useEffect)((function(){if(s){var e=l({type:"error",text:s.message});return function(){b(e)}}}),[s,l,b]),{removePost:Object(O.useCallback)((function(e){return it.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return r(!0),t.prev=1,t.next=4,it.a.awrap(i({variables:{removePostId:e}}));case 4:return t.next=6,it.a.awrap(c());case 6:return t.prev=6,r(!1),t.finish(6);case 9:case"end":return t.stop()}}),null,null,[[1,,6,9]],Promise)}),[i]),loading:n}},Gn=function(){return Object(O.useContext)(wn)},Yn=o.b.View(An||(An=A()(["\n  ","\n"])),(function(e){var t=e.fullWidth,n=e.theme;return t?"\n    border-top-width: 7px; \n    border-color: "+n.colors.shade+";\n  ":"\n    background-color: "+n.colors.shade+";\n    margin: 7px;\n    border-radius: 7px;\n  "})),_n=function(e){var t,n,r,c=e.post,a=e.fullWidth,o=Object(Vt.p)(),i=Wn(),s=i.removePost,u=i.loading,l=Object(O.useState)(!1),b=ue()(l,2),j=b[0],d=b[1];return Object(x.jsxs)(Yn,{fullWidth:a,children:[u&&Object(x.jsx)(L,{}),Object(x.jsx)(Ue,{left:Object(x.jsx)(Re,{children:Object(x.jsx)(ae,{mediaId:null==c||null==(t=c.creator)?void 0:t.avatar})}),right:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(Re,{onPress:function(){return o.navigate("Comments",{id:c.id})},children:[Object(x.jsx)(R,{name:"message-circle",color:"text",size:20}),Object(x.jsx)(de,{children:c.commentCount})]}),Object(x.jsx)(Re,{onPress:function(){return d(!0)},children:Object(x.jsx)(R,{name:"more-horizontal",color:"text",size:20})})]}),description:c.body,overline:(null==(n=c.creator)?void 0:n.name)||(null==(r=c.creator)?void 0:r.username)}),c.media&&Object(x.jsx)(Qt,{media:c.media}),Object(x.jsx)(Qe,{onClose:function(){return d(!1)},visible:j,children:Object(x.jsx)(ve,{onPress:function(){return s(c.id)},title:"Remove",type:"destructive"})})]})},Xn=n(148),Qn=n(58),Zn=o.b.Image($n||($n=A()(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  border-radius: 5px;\n"]))),er=o.b.View(Vn||(Vn=A()(["\n  padding-bottom: 100%;\n"]))),tr=o.b.View(Mn||(Mn=A()(["\n  width: 33%;\n  align-items: center;\n  justify-content: center;\n"]))),nr=o.b.View(Ln||(Ln=A()(["\n  flex-direction: row;\n  flex-wrap: wrap;\n"]))),rr=o.b.TouchableOpacity(Nn||(Nn=A()(["\n  position: absolute;\n  top: 5px;\n  left: 0px;\n  bottom: 5px;\n  right: 10px;\n  justify-content: center;\n  align-items: center;\n  background: #ddd;\n  border-radius: 5px;\n"]))),cr=o.b.TouchableOpacity(Rn||(Rn=A()(["\n  position: absolute;\n  top: 5px;\n  left: 0px;\n  bottom: 5px;\n  right: 10px;\n"]))),ar=function(e){var t=e.files,n=e.onUpdate,r=Object(O.useCallback)((function(){var e,r,c,a,o,i,s;return it.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,it.a.awrap(Xn.a({mediaTypes:Qn.a.All,quality:1,base64:!0}));case 2:if(!(e=u.sent).cancelled&&e.base64){u.next=5;break}return u.abrupt("return");case 5:r=e.uri.split("/"),c=ue()(r,1),a=c[0],o=/\.(\w+)$/.exec(a),i=o?"image/"+o[1]:"image",s={type:i,name:a,uri:e.uri},n([].concat(ie()(t),[s]));case 10:case"end":return u.stop()}}),null,null,null,Promise)}),[t,n]),c=Object(O.useCallback)((function(e){n(t.filter((function(t){return t!==e})))}),[t,n]);return Object(x.jsx)(Ue,{children:Object(x.jsxs)(nr,{children:[t.map((function(e){return Object(x.jsxs)(tr,{children:[Object(x.jsx)(er,{}),Object(x.jsx)(cr,{onPress:function(){return c(e)},children:Object(x.jsx)(Zn,{source:{uri:e.uri}})})]},e.uri)})),Object(x.jsxs)(tr,{children:[Object(x.jsx)(er,{}),Object(x.jsx)(rr,{onPress:r,children:Object(x.jsx)(R,{name:"plus-circle",size:40})})]})]})})},or=function(e){var t=e.label,n=e.feeds,r=e.selected,c=e.onSelect,a=Object(O.useState)(!1),o=ue()(a,2),i=o[0],s=o[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Ue,{overline:t,onPress:function(){return s(!0)},children:Object(x.jsx)(de,{children:(null==r?void 0:r.name)||"Select"})}),Object(x.jsx)(dt,{visible:i,selected:r,onClose:function(){return s(!1)},items:n||[],getKey:function(e){return e.id},onSelect:c,renderSelect:function(e){return Object(x.jsx)(Ue,{title:e.name})}})]})},ir=function(e){var t=e.label,n=e.users,r=e.selected,c=e.onSelect,a=Object(O.useState)(!1),o=ue()(a,2),i=o[0],s=o[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Ue,{overline:t,onPress:function(){return s(!0)},children:Object(x.jsx)(de,{children:(null==r?void 0:r.name)||(null==r?void 0:r.username)||"Select"})}),Object(x.jsx)(dt,{visible:i,selected:r,onClose:function(){return s(!1)},items:n||[],getKey:function(e){return e.id},onSelect:c,renderSelect:function(e){return Object(x.jsx)(Ue,{title:e.name||e.username})}})]})},sr=function(e){var t=e.label,n=e.items,r=e.selected,c=e.onSelect,a=Object(O.useState)(!1),o=ue()(a,2),i=o[0],s=o[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Ue,{overline:t,onPress:function(){return s(!0)},children:Object(x.jsx)(de,{children:(null==r?void 0:r.key)||"Select"})}),Object(x.jsx)(dt,{visible:i,selected:r,onClose:function(){return s(!1)},items:n,getKey:function(e){return e.key},onSelect:c,renderSelect:function(e){return Object(x.jsx)(Ue,{title:e.key})}})]})},ur=function(){var e=Object(O.useContext)(p.a).pushToken,t=function(e){var t=rn(rn({},cn),e);return en.a(hn,t)}(),n=ue()(t,1)[0];return Object(O.useEffect)((function(){e&&n({variables:{token:e}})}),[e]),Object(x.jsx)(x.Fragment,{})},lr=["data"];function br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?br(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dr,fr,Or,pr,xr,hr,mr,vr,gr,yr,wr,Pr,Sr,kr=Object(O.createContext)(void 0),Cr=function(e){var t=e.children,n=pn({variables:{}}),r=n.data,c=Se()(n,lr),a=Object(O.useMemo)((function(){var e;return(null==r||null==(e=r.profile)?void 0:e.feeds)||[]}),[r]),o=Object(O.useMemo)((function(){return null==r?void 0:r.profile}),[r]),i=Object(O.useMemo)((function(){return jr(jr({},c),{},{data:r,feeds:a,profile:o})}),[c,r,a]);return Object(x.jsx)(kr.Provider,{value:i,children:t})},Ir=function(){var e=Tn(),t=function(e){var t=rn(rn({},cn),e);return en.a(xn,t)}(),n=ue()(t,1)[0];return Object(O.useCallback)((function(t){var r,c,a;return it.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!t){o.next=6;break}return o.next=3,it.a.awrap(e([t]));case 3:o.t0=o.sent,o.next=7;break;case 6:o.t0=[];case 7:return r=o.t0,c=ue()(r,1),a=c[0],o.next=12,it.a.awrap(n({variables:{mediaId:a}}));case 12:case"end":return o.stop()}}),null,null,null,Promise)}),[])},Tr=function(){return Object(O.useContext)(kr)},zr=o.b.ScrollView(dr||(dr=A()(["\n  flex: 1;\n"]))),Er=o.b.View(fr||(fr=A()(["\n  flex: 1;\n  background-color: ",";\n"])),(function(e){return e.theme.colors.background})),Fr=function(e){var t=e.navigation,n=Object(O.useState)(!1),r=ue()(n,2),c=r[0],a=r[1],o=Gn().refetch,i=Tr(),s=i.feeds,u=i.refetch,l=i.loading,b=Object(O.useState)(),j=ue()(b,2),d=j[0],f=j[1],p=Object(O.useState)([]),h=ue()(p,2),m=h[0],v=h[1],g=Object(O.useState)(""),y=ue()(g,2),w=y[0],P=y[1],S=Kn(),k=Object(O.useMemo)((function(){return(null==s?void 0:s.filter((function(e){return"admin"===e.accessType})).map((function(e){return e.feed})))||[]}),[s]),C=Object(O.useCallback)((function(){return it.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.next=3,it.a.awrap(S(d.id,w,m));case 3:return e.next=5,it.a.awrap(o());case 5:a(!1),f(void 0),v([]),P(""),t.navigate("Feed",{});case 10:case"end":return e.stop()}}),null,null,null,Promise)}),[d,w,m]);return Object(Vt.o)(Object(O.useCallback)((function(){u()}),[u])),s?Object(x.jsx)(Ge,{loading:l||c,children:Object(x.jsxs)(Er,{children:[Object(x.jsx)(Nt,{title:"Create post"}),Object(x.jsxs)(zr,{children:[Object(x.jsx)(ar,{files:m,onUpdate:v}),Object(x.jsx)(or,{label:"Feed",feeds:k,selected:d,onSelect:f}),Object(x.jsx)(Ue,{overline:"Content",children:Object(x.jsx)(lt,{label:"Tell your story...",value:w,onChangeText:P})})]}),Object(x.jsx)(Ue,{children:!!d&&m.length>0&&Object(x.jsx)(ve,{onPress:C,title:"Create"})})]})}):Object(x.jsx)(x.Fragment,{})},Dr=n(70),Ar=n(24),$r=n(222),Vr=o.b.View(Or||(Or=A()(["\n  margin-top: 15px;\n  border-bottom-width: 5px;\n  margin-bottom: 15px;\n  border-color: ",";\n"])),(function(e){return e.theme.colors.shade})),Mr=o.b.View(pr||(pr=A()(["\n  background-color: ",";\n  flex: 1;\n"])),(function(e){return e.theme.colors.background})),Lr=function(){var e=Gn(),t=e.posts,n=e.loading,r=e.refetch,c=e.feeds,a=e.setFeeds,o=Tr().feeds,i=Object(O.useMemo)((function(){return o.map((function(e){return e.feed}))}),[o]),s=Object(O.useMemo)((function(){return Math.ceil(Ar.a.get("window").width/500)}),[]),u=Object(O.useCallback)((function(e){var t=e.item;return Object(x.jsx)(_n,{fullWidth:s<=1,post:t},t.id)}),[s]);return Object(x.jsx)(Ge,{children:Object(x.jsxs)(Mr,{children:[Object(x.jsx)(Nt,{title:"All posts",right:Object(x.jsx)(x.Fragment,{children:i.length>1&&Object(x.jsx)(Ze,{feeds:i,selected:c,onSelect:a})})},"test"),Object(x.jsx)($r.a,{data:t,keyExtractor:function(e){return e.id},renderItem:u,numColumns:s,ItemSeparatorComponent:Vr,refreshControl:Object(x.jsx)(Dr.a,{refreshing:n,onRefresh:r})})]})})},Nr=function(e){var t=function(e){var t=rn(rn({},cn),e);return tn.a(on,t)}({variables:{feedId:e}}),n=t.data,r=t.refetch,c=t.loading,a=t.error,o=Object(O.useMemo)((function(){return null==n?void 0:n.feed}),[n]);return console.log(a),{feed:o,refetch:r,loading:c,error:a}},Rr=function(){var e=function(e){var t=rn(rn({},cn),e);return en.a(sn,t)}(),t=ue()(e,1)[0];return Object(O.useCallback)((function(e){return it.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,it.a.awrap(t({variables:{name:e}}));case 2:case"end":return n.stop()}}),null,null,null,Promise)}),[t])},qr=function(){var e=function(e){var t=rn(rn({},cn),e);return en.a(un,t)}(),t=ue()(e,1)[0];return Object(O.useCallback)((function(e,n,r){return it.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,it.a.awrap(t({variables:{feedId:e,userId:n,accessType:r}}));case 2:case"end":return c.stop()}}),null,null,null,Promise)}),[t])},Br=function(){var e=function(e){var t=rn(rn({},cn),e);return en.a(ln,t)}(),t=ue()(e,1)[0];return Object(O.useCallback)((function(e,n){return it.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,it.a.awrap(t({variables:{feedId:e,userId:n}}));case 2:case"end":return r.stop()}}),null,null,null,Promise)}),[t])},Ur=function(e){var t=e.navigation,n=Tr(),r=n.profile,c=n.feeds,a=n.refetch,o=Object(O.useContext)(p.a).logout,i=Rr(),s=Object(O.useState)(!1),u=ue()(s,2),l=u[0],b=u[1],j=Object(O.useState)(""),d=ue()(j,2),f=d[0],h=d[1],m=Ir(),v=Object(O.useCallback)((function(){var e,t,n,r,c,o,i;return it.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,it.a.awrap(Xn.a({mediaTypes:Qn.a.All,quality:1,base64:!0}));case 2:if(!(e=s.sent).cancelled&&e.base64){s.next=5;break}return s.abrupt("return");case 5:return t=e.uri.split("/"),n=ue()(t,1),r=n[0],c=/\.(\w+)$/.exec(r),o=c?"image/"+c[1]:"image",i={type:o,name:r,uri:e.uri},s.next=11,it.a.awrap(m(i));case 11:return s.next=13,it.a.awrap(a());case 13:case"end":return s.stop()}}),null,null,null,Promise)}),[]),g=Object(O.useCallback)((function(){return it.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it.a.awrap(i(f));case 2:return h(""),b(!1),e.next=6,it.a.awrap(a());case 6:case"end":return e.stop()}}),null,null,null,Promise)}),[f,i]);return Object(x.jsxs)(Ge,{children:[Object(x.jsx)(Nt,{title:"Profile"}),Object(x.jsx)(Ue,{left:Object(x.jsx)(Re,{children:Object(x.jsx)(ae,{mediaId:(null==r?void 0:r.avatar)||void 0,onPress:v})}),title:(null==r?void 0:r.name)||(null==r?void 0:r.username)}),Object(x.jsxs)(Qe,{visible:l,onClose:function(){return b(!1)},children:[Object(x.jsx)(Ue,{children:Object(x.jsx)(lt,{label:"Name",value:f,onChangeText:h})}),Object(x.jsx)(Ue,{children:Object(x.jsx)(ve,{title:"Save",onPress:g})})]}),Object(x.jsx)(nt,{title:"My feeds",items:c,getKey:function(e){return e.feed.id},add:null!=r&&r.admin?function(){b(!0)}:void 0,render:function(e){return Object(x.jsx)(Ue,{title:e.feed.name,overline:e.accessType,right:Object(x.jsx)(Re,{children:Object(x.jsx)(ve,{title:"Leave",type:"destructive"})}),onPress:function(){t.navigate("FeedEdit",{id:e.feed.id})}})}}),Object(x.jsx)(Ue,{children:Object(x.jsx)(ve,{title:"Logout",type:"destructive",onPress:o})})]})},Jr=function(){var e=function(e){var t=rn(rn({},cn),e);return tn.a(mn,t)}(),t=e.data,n=e.refetch,r=e.loading,c=e.error;return{users:Object(O.useMemo)((function(){return null==t?void 0:t.users}),[t]),refetch:n,loading:r,error:c}},Hr=[{key:"Admin",value:"admin"},{key:"Moderator",value:"moderator"},{key:"Writer",value:"writer"},{key:"Reader",value:"reader"}],Kr=function(e){var t=e.route.params.id,n=Nr(t),r=n.feed,c=n.refetch,a=Jr().users,o=Br(),i=qr(),s=Object(O.useState)(!1),u=ue()(s,2),l=u[0],b=u[1],j=Object(O.useState)(),d=ue()(j,2),f=d[0],p=d[1],h=Object(O.useState)(),m=ue()(h,2),v=m[0],g=m[1],y=Object(O.useCallback)((function(){return it.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it.a.awrap(i(t,f.id,v.value));case 2:return p(void 0),g(void 0),b(!1),e.next=7,it.a.awrap(c());case 7:case"end":return e.stop()}}),null,null,null,Promise)}),[t,f,v]),w=Object(O.useCallback)((function(e){return it.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,it.a.awrap(o(t,e));case 2:return n.next=4,it.a.awrap(c());case 4:case"end":return n.stop()}}),null,null,null,Promise)}),[t,o,c]);return r?Object(x.jsxs)(Ge,{children:[Object(x.jsx)(Nt,{title:"Feed"}),Object(x.jsx)(Ue,{children:Object(x.jsx)(lt,{label:"Name",value:r.name})}),Object(x.jsx)(nt,{title:"Users",add:function(){b(!0)},items:r.users,getKey:function(e){return e.user.id},render:function(e){return Object(x.jsx)(Ue,{overline:e.accessType,title:e.user.name||e.user.username,right:Object(x.jsx)(Re,{children:Object(x.jsx)(ve,{title:"Remove",onPress:function(){return w(e.user.id)}})})})}}),Object(x.jsxs)(Qe,{visible:l,onClose:function(){return b(!1)},children:[Object(x.jsx)(ir,{label:"User",selected:f,onSelect:function(e){return p(e)},users:a}),Object(x.jsx)(sr,{label:"Access type",selected:v,onSelect:function(e){return g(e)},items:Hr}),!!v&&!!f&&Object(x.jsx)(Ue,{children:Object(x.jsx)(ve,{title:"Save",onPress:y})})]})]}):Object(x.jsx)(x.Fragment,{})},Wr=n(142),Gr=n.n(Wr),Yr=o.b.Image(xr||(xr=A()(["\n  width: 300px;\n  height: 300px;\n"]))),_r=o.b.View(hr||(hr=A()(["\n  flex: 1;\n  justify-content: center;\n  align-items: center;\n  background: ",";\n"])),(function(e){return e.theme.colors.shade})),Xr=o.b.View(mr||(mr=A()(["\n  padding: 15px;\n  margin: 30px;\n  background: ",";\n  border-radius: 15px;\n"])),(function(e){return e.theme.colors.background})),Qr=o.b.Text(vr||(vr=A()([""]))),Zr=function(e){e.navigation;var t=Object(O.useContext)(p.a).login,n=Object(O.useState)(!1),r=ue()(n,2),c=r[0],a=r[1],o=Object(O.useState)(),i=ue()(o,2),s=i[0],u=i[1],l=Object(O.useState)(""),b=ue()(l,2),j=b[0],d=b[1],f=Object(O.useState)(""),h=ue()(f,2),m=h[0],v=h[1],g=Object(O.useState)(""),y=ue()(g,2),w=y[0],P=y[1],S=Object(O.useCallback)((function(){a(!0);it.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it.a.awrap(t(j,m,w));case 2:a(!1);case 3:case"end":return e.stop()}}),null,null,null,Promise).catch((function(e){a(!1),u(e)}))}),[j,m,w]);return c?Object(x.jsx)(Qr,{children:"Loading"}):Object(x.jsx)(Ge,{children:Object(x.jsx)(_r,{children:Object(x.jsxs)(Xr,{children:[Object(x.jsx)(Yr,{source:Gr.a}),s&&Object(x.jsx)(Qr,{children:s.toString()}),Object(x.jsx)(Ue,{left:Object(x.jsx)(Re,{children:Object(x.jsx)(R,{name:"server"})}),children:Object(x.jsx)(lt,{autoCorrect:!1,label:"Domain",value:j,onChangeText:d})}),Object(x.jsx)(Ue,{left:Object(x.jsx)(Re,{children:Object(x.jsx)(R,{name:"user"})}),children:Object(x.jsx)(lt,{autoCorrect:!1,label:"Username",value:m,onChangeText:v})}),Object(x.jsx)(Ue,{left:Object(x.jsx)(Re,{children:Object(x.jsx)(R,{name:"key"})}),children:Object(x.jsx)(lt,{secure:!0,label:"Secret",value:w,onChangeText:P})}),Object(x.jsx)(Ue,{children:Object(x.jsx)(ve,{onPress:S,title:"Login"})})]})})})},ec=n(39),tc=o.b.Image(gr||(gr=A()(["\n  width: 300px;\n  height: 300px;\n"]))),nc=o.b.View(yr||(yr=A()(["\n  align-items: center;\n  justify-content: center;\n  padding: 0 20px;\n  flex: 1;\n"]))),rc=o.b.View(wr||(wr=A()(["\n  padding: 15px;\n  margin: 30px;\n  background: ",";\n  border-radius: 15px;\n"])),(function(e){return e.theme.colors.background})),cc=function(e){var t=e.route,n=(e.navigation,t.params.inviteCode),r=Object(O.useContext)(p.a).acceptInvitation,c=Object(O.useState)(""),a=ue()(c,2),o=a[0],i=a[1],s=Object(O.useState)(""),u=ue()(s,2),l=u[0],b=u[1],j=Object(O.useState)(!1),d=ue()(j,2),f=d[0],h=d[1],m=Object(O.useState)(),v=ue()(m,2),g=(v[0],v[1]),y=Object(O.useCallback)((function(){h(!0);it.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it.a.awrap(r(n,o,l));case 2:h(!1);case 3:case"end":return e.stop()}}),null,null,null,Promise).catch((function(e){h(!1),g(e)}))}),[n,o,l]);return f?Object(x.jsx)(ec.a,{children:"Loading"}):Object(x.jsx)(Ge,{children:Object(x.jsx)(nc,{children:Object(x.jsxs)(rc,{children:[Object(x.jsx)(tc,{source:Gr.a}),Object(x.jsx)(Ue,{description:"You are almost there! Just pick your username and password and off we go!"}),Object(x.jsx)(Ue,{left:Object(x.jsx)(Re,{children:Object(x.jsx)(R,{name:"user"})}),children:Object(x.jsx)(lt,{autoCorrect:!1,label:"Username",value:o,onChangeText:i})}),Object(x.jsx)(Ue,{left:Object(x.jsx)(Re,{children:Object(x.jsx)(R,{name:"key"})}),children:Object(x.jsx)(lt,{secure:!0,label:"Password",value:l,onChangeText:b})}),Object(x.jsx)(Ue,{children:Object(x.jsx)(ve,{onPress:y,title:"Let's GO"})})]})})})},ac=o.b.View(Pr||(Pr=A()(["\n  flex: 1;\n"]))),oc=o.b.View(Sr||(Sr=A()(["\n  flex: 1;\n"]))),ic=function(e){var t=e.route.params.id,n=Object(c.d)(),r=Object(O.useState)(""),a=ue()(r,2),o=a[0],i=a[1],s=function(e){var t=rn(rn({},cn),e);return en.a(an,t)}(),u=ue()(s,1)[0],l=function(e){var t=rn(rn({},cn),e);return tn.a(bn,t)}({variables:{postId:t}}),b=l.data,j=l.refetch,d=Object(O.useCallback)((function(){return it.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it.a.awrap(u({variables:{params:{content:o,post:t}}}));case 2:return i(""),e.next=5,it.a.awrap(j());case 5:case"end":return e.stop()}}),null,null,null,Promise)}),[o,t,u,j]);return Object(x.jsxs)(Ge,{children:[Object(x.jsx)(Nt,{title:"Comments"}),Object(x.jsxs)(oc,{style:{paddingBottom:n.bottom+20},children:[Object(x.jsx)(ac,{children:Object(x.jsx)(st.a,{style:{flex:1},inverted:!0,keyExtractor:function(e){return e.id},renderItem:function(e){var t=e.item;return Object(x.jsx)(Ue,{left:Object(x.jsx)(Re,{children:Object(x.jsx)(ae,{mediaId:t.creator.avatar||void 0})}),overline:t.creator.name||t.creator.username,description:t.content})},data:ie()((null==b?void 0:b.post.comments)||[]).reverse()})}),Object(x.jsx)(Ue,{right:Object(x.jsx)(ve,{title:"Send",onPress:d}),children:Object(x.jsx)(lt,{label:" Say something...",value:o,onChangeText:i})})]})]})};function sc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sc(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lc=Object(E.a)(),bc=Object(C.a)(),jc=Object(E.a)(),dc=function(){return Object(x.jsx)(jc.Navigator,{screenOptions:{headerShown:!1},children:Object(x.jsx)(jc.Screen,{name:"ProfileMain",component:Ur})})},fc=function(){var e=Object(o.c)(),t=Tr().profile,n=Object(O.useMemo)((function(){var e;return null==t||null==(e=t.feeds)?void 0:e.find((function(e){return"admin"===e.accessType||"moderator"===e.accessType||"writer"===e.accessType}))}),[t]);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(ur,{}),Object(x.jsxs)(bc.Navigator,{screenOptions:{headerShown:!1,tabBarActiveTintColor:e.colors.primary},children:[Object(x.jsx)(bc.Screen,{name:"Feed",component:Lr,options:{title:"Posts",tabBarIcon:function(e){var t=e.focused;return Object(x.jsx)(R,{color:t?"primary":"text",name:"home",size:28})}}}),n&&Object(x.jsx)(bc.Screen,{name:"Add",component:Fr,options:{title:"Add",tabBarIcon:function(e){var t=e.focused;return Object(x.jsx)(R,{color:t?"primary":"text",name:"plus-square",size:28})}}}),Object(x.jsx)(bc.Screen,{name:"Profile",component:dc,options:{title:"Profile",tabBarIcon:function(e){var t=e.focused;return Object(x.jsx)(R,{color:t?"primary":"text",name:"user",size:28})}}})]})]})},Oc=function(){var e=Object(o.c)(),t=Object(O.useContext)(p.a).domain;return Object(x.jsx)(lc.Navigator,{screenOptions:{headerShown:!1},children:t?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(lc.Group,{children:Object(x.jsx)(lc.Screen,{name:"Main",component:fc})}),Object(x.jsxs)(lc.Group,{screenOptions:{contentStyle:{backgroundColor:e.colors.shade},presentation:"modal"},children:[Object(x.jsx)(lc.Screen,{name:"FeedEdit",component:Kr}),Object(x.jsx)(lc.Screen,{name:"Comments",component:ic})]})]}):Object(x.jsxs)(lc.Group,{children:[Object(x.jsx)(lc.Screen,{name:"Login",component:Zr}),Object(x.jsx)(lc.Screen,{initialParams:{inviteCode:""},name:"AcceptInvitation",component:cc})]})})},pc=function(e){var t=e.colorScheme,n=Object(o.c)(),r=Object(O.useMemo)((function(){return"dark"===t?I.a:T.a}),[t]),c=Object(O.useMemo)((function(){return uc(uc({},r),{},{colors:uc(uc({},r.colors),{},{background:n.colors.shade,card:n.colors.background,text:n.colors.text})})}),[r,n]);return Object(x.jsx)(Pn,{children:Object(x.jsx)(z.a,{linking:F,theme:c,children:Object(x.jsx)(Oc,{})})})};r.a.getSizeWithHeaders||(r.a.getSizeWithHeaders=function(e,t,n,r){n(100,100)});t.a=function(){var e=Object(a.a)();return Object(x.jsx)(o.a,{theme:"dark"===e?k:g,children:Object(x.jsx)(c.b,{children:Object(x.jsxs)(p.b,{children:[Object(x.jsx)(i.a,{style:"dark"===e?"light":"dark"}),Object(x.jsx)(v,{children:Object(x.jsx)(Jn,{children:Object(x.jsx)(Cr,{children:Object(x.jsx)(pc,{colorScheme:e})})})})]})})})}},242:function(e,t,n){e.exports=n(306)},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return y}));var r=n(9),c=n.n(r),a=n(5),o=n.n(a),i=n(2),s=n.n(i),u=n(0),l=n(156),b=n(117),j=n(232),d=n(12),f=n(344),O=n(336),p=n(321),x=n(322),h=n(1);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=Object(u.createContext)(void 0),y=function(e){var t=e.children,n=Object(u.useState)(),r=o()(n,2),c=r[0],a=r[1],i=Object(u.useState)(),m=o()(i,2),y=(m[0],m[1]),w=Object(u.useState)(),P=o()(w,2),S=P[0],k=P[1],C=Object(u.useState)(!1),I=o()(C,2),T=I[0],z=I[1],E=Object(u.useCallback)((function(){return s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.awrap(b.a.removeItem("_/server"));case 2:a(void 0);case 3:case"end":return e.stop()}}),null,null,null,Promise)}),[a]);Object(u.useEffect)((function(){c&&function(){var e,t,n,r,c,a;return s.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!j.a||"web"===d.a.OS){o.next=20;break}return o.next=3,s.a.awrap(f.a());case 3:if(e=o.sent,t=e.status,n=t,"granted"===t){o.next=12;break}return o.next=9,s.a.awrap(f.b());case 9:r=o.sent,c=r.status,n=c;case 12:if("granted"===n){o.next=15;break}return alert("Failed to get push token for push notification!"),o.abrupt("return");case 15:return o.next=17,s.a.awrap(O.a());case 17:return a=o.sent.data,"android"===d.a.OS&&p.a("default",{name:"default",importance:x.a.MAX,vibrationPattern:[0,250,250,250],lightColor:"#FF231F7C"}),o.abrupt("return",a);case 20:case 21:case"end":return o.stop()}}),null,null,null,Promise)}().then(k)}),[c]);var F=Object(u.useCallback)((function(e,t,n){var r,c,o,i;return s.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return r=e+"/graphql",u.next=3,s.a.awrap(fetch(r,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({query:"\n            mutation CreateAuthToken($secret: String!, $username: String!) {\n              createAuthToken(secret: $secret, username: $username)\n            } \n          ",variables:{username:t,secret:n}})}));case 3:return c=u.sent,u.next=6,s.a.awrap(c.json());case 6:if(o=u.sent,c.ok){u.next=10;break}throw y(o.errors),new Error("failed");case 10:return i={token:o.data.createAuthToken,domain:e},a(i),u.next=14,s.a.awrap(b.a.setItem("_/server",JSON.stringify(i)));case 14:case"end":return u.stop()}}),null,null,null,Promise)}),[]),D=Object(u.useCallback)((function(e,t,n,r){var c,o,i,u,j,d,f,O;return s.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return c=l.Buffer.from(e,"base64").toString("utf-8"),o=JSON.parse(c),i=o.creationToken,u=o.domain,j=u+"/api/accept-invitation",p.next=5,s.a.awrap(fetch(j,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:t,secret:n,creationToken:i,name:r})}));case 5:if((d=p.sent).ok){p.next=12;break}return p.t0=Error,p.next=10,s.a.awrap(d.text());case 10:throw p.t1=p.sent,new p.t0(p.t1);case 12:return p.next=14,s.a.awrap(d.json());case 14:return f=p.sent,O={token:f.token,domain:u},a(O),p.next=19,s.a.awrap(b.a.setItem("_/server",JSON.stringify(O)));case 19:case"end":return p.stop()}}),null,null,null,Promise)}),[]);return Object(u.useEffect)((function(){(function(){var e,t;return s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.a.awrap(b.a.getItem("_/server"));case 2:if(!(e=n.sent)){n.next=9;break}return t=JSON.parse(e),n.next=7,s.a.awrap(fetch(t.domain+"/api/config",{headers:{Authorization:"Bearer "+t.token}}));case 7:n.sent.ok&&a(JSON.parse(e));case 9:z(!0);case 10:case"end":return n.stop()}}),null,null,null,Promise)})().catch((function(e){z(!0),y(e)}))}),[]),T?Object(h.jsx)(g.Provider,{value:v(v({},c),{},{pushToken:S,logout:E,login:F,acceptInvitation:D}),children:t}):Object(h.jsx)(h.Fragment,{})}},82:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return x}));var r,c,a=n(5),o=n.n(a),i=n(10),s=n.n(i),u=n(2),l=n.n(u),b=n(30),j=n(11),d=n(0),f=n(1),O=j.b.View(r||(r=s()(["\n  height: ","px;\n  width: 100%;\n"])),(function(e){return e.height})),p=j.b.Image(c||(c=s()(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background: #ccc;\n"]))),x=function(t){var n=t.media,r=Object(d.useContext)(b.a),c=r.domain,a=r.token,i=Object(d.useState)(0),s=o()(i,2),u=s[0],j=s[1],x=Object(d.useState)(),h=o()(x,2),m=h[0],v=h[1];return Object(d.useEffect)((function(){!function(){var t,r,o,i;l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,l.a.awrap(fetch(c+"/api/thumb/"+n.id,{headers:{Authorization:"bearer "+a}}));case 2:return t=s.sent,s.next=5,l.a.awrap(t.arrayBuffer());case 5:r=s.sent,o=t.headers.get("content-type"),i=e.from(r).toString("base64"),v("data:"+(o||"image/jpeg")+";base64,"+i);case 10:case"end":return s.stop()}}),null,null,null,Promise)}()}),[c,a,n.id]),Object(f.jsx)(O,{height:u/n.aspect,onLayout:function(e){var t=e.nativeEvent.layout.width;t!==u&&j(t)},children:Object(f.jsx)(p,{source:{uri:m}})})}}).call(this,n(156).Buffer)}},[[242,1,2]]]);
//# sourceMappingURL=app.e77a03b6.chunk.js.map