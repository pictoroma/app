(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{139:function(e,t,n){e.exports=n.p+"static/media/tourist.e3fa36f8.png"},224:function(e,t,n){"use strict";var r=n(36),c=n(335),a=n(118);var s=n(11),i=n(227),o=n(9),u=n.n(o),l=n(226),b=n(231),j=n(331),d=n(319),f=n(209),O=n(0),p=n(4),x=n.n(p),h=n(2),m=n.n(h),v=n(203),g=n(114),y=n(228),w=n(12),P=n(336),S=n(329),k=n(314),C=n(315),T=n(1);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=Object(O.createContext)(void 0),E=function(e){var t=e.children,n=Object(O.useState)(),r=x()(n,2),c=r[0],a=r[1],s=Object(O.useState)(),i=x()(s,2),o=(i[0],i[1]),u=Object(O.useState)(),l=x()(u,2),b=l[0],j=l[1],d=Object(O.useState)(!1),f=x()(d,2),p=f[0],h=f[1],I=Object(O.useCallback)((function(){return m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.awrap(g.a.removeItem("_/server"));case 2:a(void 0);case 3:case"end":return e.stop()}}),null,null,null,Promise)}),[a]);Object(O.useEffect)((function(){c&&function(){var e,t,n,r,c,a;return m.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(!y.a||"web"===w.a.OS){s.next=20;break}return s.next=3,m.a.awrap(P.a());case 3:if(e=s.sent,t=e.status,n=t,"granted"===t){s.next=12;break}return s.next=9,m.a.awrap(P.b());case 9:r=s.sent,c=r.status,n=c;case 12:if("granted"===n){s.next=15;break}return alert("Failed to get push token for push notification!"),s.abrupt("return");case 15:return s.next=17,m.a.awrap(S.a());case 17:return a=s.sent.data,"android"===w.a.OS&&k.a("default",{name:"default",importance:C.a.MAX,vibrationPattern:[0,250,250,250],lightColor:"#FF231F7C"}),s.abrupt("return",a);case 20:case 21:case"end":return s.stop()}}),null,null,null,Promise)}().then(j)}),[c]);var E=Object(O.useCallback)((function(e,t,n){var r,c,s,i;return m.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return r=e+"/graphql",u.next=3,m.a.awrap(fetch(r,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({query:"\n            mutation CreateAuthToken($secret: String!, $username: String!) {\n              createAuthToken(secret: $secret, username: $username)\n            } \n          ",variables:{username:t,secret:n}})}));case 3:return c=u.sent,u.next=6,m.a.awrap(c.json());case 6:if(s=u.sent,c.ok){u.next=10;break}throw o(s.errors),new Error("failed");case 10:return i={token:s.data.createAuthToken,domain:e},a(i),u.next=14,m.a.awrap(g.a.setItem("_/server",JSON.stringify(i)));case 14:case"end":return u.stop()}}),null,null,null,Promise)}),[]),D=Object(O.useCallback)((function(e,t,n,r){var c,s,i,o,u,l,b,j;return m.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return c=v.Buffer.from(e,"base64").toString("utf-8"),s=JSON.parse(c),i=s.creationToken,o=s.domain,u=o+"/api/accept-invitation",d.next=5,m.a.awrap(fetch(u,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:t,secret:n,creationToken:i,name:r})}));case 5:if((l=d.sent).ok){d.next=12;break}return d.t0=Error,d.next=10,m.a.awrap(l.text());case 10:throw d.t1=d.sent,new d.t0(d.t1);case 12:return d.next=14,m.a.awrap(l.json());case 14:return b=d.sent,console.log(b),j={token:b.token,domain:o},a(j),d.next=20,m.a.awrap(g.a.setItem("_/server",JSON.stringify(j)));case 20:case"end":return d.stop()}}),null,null,null,Promise)}),[]);return Object(O.useEffect)((function(){(function(){var e,t;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.awrap(g.a.getItem("_/server"));case 2:if(!(e=n.sent)){n.next=9;break}return t=JSON.parse(e),n.next=7,m.a.awrap(fetch(t.domain+"/api/config",{headers:{Authorization:"Bearer "+t.token}}));case 7:n.sent.ok&&a(JSON.parse(e));case 9:h(!0);case 10:case"end":return n.stop()}}),null,null,null,Promise)})().catch((function(e){h(!0),o(e)}))}),[]),p?Object(T.jsx)(z.Provider,{value:F(F({},c),{},{pushToken:b,logout:I,login:E,acceptInvitation:D}),children:t}):Object(T.jsx)(T.Fragment,{})};function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $=function(e){var t=e.children,n=Object(O.useContext)(z),r=n.token,c=n.domain,a=Object(O.useMemo)((function(){var e=Object(l.a)({uri:c+"/graphql"}),t=Object(f.a)((function(e,t){return{headers:V(V({},t.headers),{},{authorization:"bearer "+r})}}));return new b.a({cache:new j.a,link:t.concat(e)})}),[r,c]);return c?Object(T.jsx)(d.a,{client:a,children:t}):Object(T.jsx)(T.Fragment,{children:t})},M={colors:{primary:"#1abc9c",icon:"#1abc9c",destructive:"#e74c3c",shade:"#ededed",input:"#ddd",secondary:"blue",shadow:"#000",background:"#fff",text:"#000",textShade:"#999"},sizes:{corners:5,icons:24},margins:{small:8,medium:16,large:24},font:{baseSize:14}};function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N,q,R=L(L({},M),{},{colors:L(L({},M.colors),{},{primary:"#e67e22",input:"#333",icon:"#e67e22",background:"#151515",shadow:"#000",secondary:"blue",shade:"#000",text:"#fff",textShade:"#666"})}),U=n(328),B=n(326),J=n(143),H=n(327),K=n(332),G={prefixes:["pictoroma://"],screens:{AcceptInvitation:"login/accept-invite"}},Y=n(10),_=n.n(Y),W=n(320);function X(e){var t=e.size,n=e.color,r=e.name,c=Object(s.c)();return Object(T.jsx)(W.a,{name:r,color:n?c.colors[n]:c.colors.icon,size:null!=t?t:c.sizes.icons})}var Q,Z,ee,te,ne,re,ce,ae,se,ie,oe,ue,le,be,je,de=s.b.View(N||(N=_()(["\n  height: ","px;\n"])),(function(e){return e.height})),fe=s.b.Image(q||(q=_()(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background: #ccc;\n"]))),Oe=function(e){var t=e.media,n=Object(O.useContext)(z),r=n.domain,c=n.token,a=Object(O.useState)(0),s=x()(a,2),i=s[0],o=s[1];return Object(O.useEffect)((function(){m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),null,null,null,Promise)}),[r,c,t.id]),Object(T.jsx)(de,{height:i/t.aspect,onLayout:function(e){var t=e.nativeEvent.layout.width;t!==i&&o(t)},children:Object(T.jsx)(fe,{})})},pe=s.b.TouchableOpacity(Q||(Q=_()([""]))),xe=s.b.View(Z||(Z=_()(["\n  position: relative;\n  width: 50px;\n  height: 50px;\n  border-radius: 25px;\n  overflow: hidden;\n  align-items: center;\n  justify-content: center;\n"]))),he=function(e){var t=e.mediaId,n=e.onPress,r=Object(T.jsx)(xe,{children:t?Object(T.jsx)(Oe,{media:{aspect:1,id:t}}):Object(T.jsx)(X,{name:"user"})});return n?Object(T.jsx)(pe,{onPress:n,children:r}):r},me=n(20),ve=n.n(me),ge=s.b.Text(ee||(ee=_()(["\n  color: ",";\n  font-weight: ",";\n  font-size: ","px;\n"])),(function(e){var t=e.color,n=e.theme;return t?n.colors[t]:n.colors.text}),(function(e){return e.bold?"bold":"normal"}),(function(e){return e.theme.font.baseSize})),ye=Object(s.b)(ge)(te||(te=_()(["\n  font-size: ","px;\n  font-weight: bold;\n"])),(function(e){return 2.8*e.theme.font.baseSize})),we=(Object(s.b)(ge)(ne||(ne=_()(["\n  font-size: ","px;\n  font-weight: bold;\n"])),(function(e){return 1.3*e.theme.font.baseSize})),Object(s.b)(ge)(re||(re=_()(["\n  font-weight: bold;\n"])))),Pe=Object(s.b)(ge)(ce||(ce=_()([""]))),Se=Object(s.b)(ge)(ae||(ae=_()(["\n  font-size: ","px;\n  text-transform: uppercase;\n"])),(function(e){return.6*e.theme.font.baseSize})),ke=(Object(s.b)(ge)(se||(se=_()(["\n  font-size: ","px;\n"])),(function(e){return.8*e.theme.font.baseSize})),Object(s.b)(ge)(ie||(ie=_()(["\n  text-transform: uppercase;\n"])))),Ce=s.b.TouchableOpacity(oe||(oe=_()([""]))),Te=function(e,t){return"secondary"===e?{bg:t.colors.secondary,fg:"#fff"}:"destructive"===e?{bg:"transparent",fg:t.colors.destructive}:{bg:t.colors.primary,fg:"#fff"}},Ie=s.b.View(ue||(ue=_()(["\n  background: ",";\n  padding: ","px;\n  border-radius: ","px;\n  align-items: center;\n"])),(function(e){var t=e.theme,n=e.type;return Te(n,t).bg}),(function(e){return e.theme.margins.small}),(function(e){return e.theme.sizes.corners})),Fe=Object(s.b)(ke)(le||(le=_()(["\n  color: ",";\n  font-weight: bold;\n"])),(function(e){var t=e.theme,n=e.type;return Te(n,t).fg})),ze=function(e){var t=e.title,n=e.onPress,r=e.accessibilityHint,c=e.accessibilityRole,a=e.accessibilityLabel,s=e.type;return Object(T.jsx)(Ce,{onPress:n,accessible:!0,accessibilityHint:r,accessibilityRole:c,accessibilityLabel:a,children:Object(T.jsx)(Ie,{type:s,children:Object(T.jsx)(Fe,{type:s,children:t})})})},Ee=n(55),De=n.n(Ee),Ve=function(e){var t=e.visible,n=e.children,r=Object(O.useMemo)((function(){var e=document.createElement("div");return e.style.position="fixed",e.style.display="flex",e.style.flexDirection="column",e.style.left="0px",e.style.top="0px",e.style.width="100%",e.style.height="100%",e.style.transition="transform 0.3s",e.style.transform="translateY(100%)",e}),[]);return Object(O.useEffect)((function(){return document.body.appendChild(r),function(){document.body.removeChild(r)}}),[r]),Object(O.useEffect)((function(){r.style.transform=t?"translateY(0)":"translateY(100%)"}),[r,t]),De.a.createPortal(Object(T.jsx)(T.Fragment,{children:n}),r)},$e=n(14),Me=n.n($e),Ae=["children","onPress"],Le=["accessibilityLabel","accessibilityRole","accessibilityHint"];function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Re,Ue,Be,Je,He,Ke,Ge,Ye,_e,We=s.b.View(be||(be=_()(["\n  padding: ","px\n    ","px;\n  ","\n  ","\n  flex-direction: ",";\n  align-items: ",";\n"])),(function(e){return e.theme.margins.medium/2}),(function(e){return e.theme.margins.medium/2}),(function(e){var t=e.background;return t?"background: "+t+";":""}),(function(e){var t=e.flex;return t?"flex: "+t+";":""}),(function(e){var t=e.direction;return t||"row"}),(function(e){var t=e.align;return t||"center"})),Xe=s.b.TouchableOpacity(je||(je=_()([""]))),Qe=function(e){var t=e.children,n=e.onPress,r=Me()(e,Ae),c=r.accessibilityLabel,a=r.accessibilityRole,s=r.accessibilityHint,i=Me()(r,Le),o=Object(T.jsx)(We,qe(qe({},i),{},{children:t}));return n?Object(T.jsx)(Xe,{accessible:!0,accessibilityRole:a||"button",accessibilityLabel:c,accessibilityHint:s,onPress:n,children:o}):o},Ze=(s.b.View(Re||(Re=_()(["\n  background: ",";\n  width: ","px;\n  height: ","px;\n  border-radius: ","px;\n"])),(function(e){return e.color}),(function(e){return e.size}),(function(e){return e.size}),(function(e){return e.size/4})),s.b.View(Ue||(Ue=_()([""])))),et=function(e,t){return e?"string"===typeof e?Object(T.jsx)(t,{children:e}):e:null},tt=function(e){var t=e.background,n=e.top,r=e.left,c=e.right,a=e.title,s=e.overline,i=e.description,o=e.children,u=e.onPress;return Object(T.jsxs)(Qe,{background:t,onPress:u,children:[r,Object(T.jsxs)(Qe,{flex:1,direction:"column",align:"stretch",children:[!!n,et(s,Se),et(a,we),et(i,Pe),!!o&&Object(T.jsx)(Ze,{children:o})]}),c]})},nt=n(60),rt=s.b.KeyboardAvoidingView(Be||(Be=_()(["\n  flex: 1;\n"]))),ct=s.b.Pressable(Je||(Je=_()(["\n  flex: 1;\n"]))),at=function(e){var t=e.children,n=Object(O.useState)(!1),r=x()(n,2),c=r[0],a=r[1];return Object(O.useEffect)((function(){var e=nt.a.addListener("keyboardDidShow",(function(){return a(!0)})),t=nt.a.addListener("keyboardDidHide",(function(){return a(!1)}));return function(){e.remove(),t.remove()}}),[]),Object(T.jsx)(ct,{disabled:!c,onPress:function(){return nt.a.dismiss()},children:Object(T.jsx)(rt,{behavior:"ios"===w.a.OS?"padding":"height",children:t})})},st=s.b.Pressable(He||(He=_()(["\n  flex: 1;\n"]))),it=s.b.View(Ke||(Ke=_()(["\n  background: ",";\n  width: 100%;\n  shadow-color: ",";\n  shadow-offset: 0 0;\n  shadow-opacity: 1;\n  shadow-radius: 200px;\n  border-radius: 12px;\n  margin-bottom: -12px;\n"])),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.shadow})),ot=s.b.View(Ge||(Ge=_()(["\n  flex: 1;\n"]))),ut=function(e){var t=e.visible,n=e.children,r=e.onClose,a=Object(c.d)();return Object(T.jsx)(Ve,{visible:t,transparent:!0,animationType:"slide",children:Object(T.jsx)(at,{children:Object(T.jsxs)(ot,{children:[Object(T.jsx)(st,{onPress:r}),Object(T.jsxs)(it,{style:{paddingBottom:a.bottom+12},children:[Object(T.jsx)(tt,{right:Object(T.jsx)(Qe,{onPress:r,children:Object(T.jsx)(X,{name:"x-circle"})})}),n]})]})})})},lt=(s.b.View(Ye||(Ye=_()(["\n  min-height: 40%;\n"]))),function(e){var t=e.selected,n=void 0===t?[]:t,r=e.feeds,c=void 0===r?[]:r,a=e.onSelect,s=Object(O.useState)(!1),i=x()(s,2),o=i[0],u=i[1];return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Qe,{onPress:function(){return u(!0)},children:Object(T.jsx)(X,{name:"filter",color:n.length>0?"primary":"text"})}),Object(T.jsxs)(ut,{visible:o,onClose:function(){return u(!1)},children:[c.map((function(e){var t=n.includes(e.id);return Object(T.jsx)(tt,{onPress:t?function(){return a(n.filter((function(t){return t!==e.id})))}:function(){return a([].concat(ve()(n),[e.id]))},left:Object(T.jsx)(Qe,{children:Object(T.jsx)(X,{name:t?"check-circle":"circle"})}),title:e.name},e.id)})),n.length>0&&Object(T.jsx)(tt,{children:Object(T.jsx)(ze,{title:"Clear",onPress:function(){return a([])}})})]})]})});function bt(e){var t=e.title,n=e.add,r=e.onPress,c=e.left;return Object(T.jsx)(tt,{onPress:r,left:c,title:t,right:n&&Object(T.jsx)(Qe,{onPress:n,children:Object(T.jsx)(X,{name:"plus-circle",size:18})})})}var jt=s.b.View(_e||(_e=_()(["\n  border-radius: 7px;\n  background: ",";\n  shadow-offset: 0px;\n  shadow-opacity: 0.1;\n  shadow-color: ",";\n  shadow-radius: 5px;\n"])),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.shadow}));function dt(e){var t=Object(O.useState)(!0),n=x()(t,2),r=n[0],c=n[1],a=e,s=a.title,i=a.items,o=a.getKey,u=a.render,l=a.add,b=a.children;return Object(T.jsx)(tt,{children:Object(T.jsxs)(jt,{children:[Object(T.jsx)(bt,{left:Object(T.jsx)(X,{name:r?"chevron-down":"chevron-up",size:18}),title:s,add:l,onPress:function(){return c(!r)}}),r&&i&&i.map((function(e){return Object(T.jsx)(O.Fragment,{children:u(e)},o(e))})),r&&b,r&&!b&&(!i||0===i.length)&&Object(T.jsx)(tt,{left:Object(T.jsx)(Qe,{children:Object(T.jsx)(X,{color:"textShade",name:"maximize"})}),children:Object(T.jsx)(Pe,{style:{marginLeft:10},color:"textShade",children:"Empty"})})]})})}var ft,Ot,pt,xt=n(68),ht=s.b.TextInput(ft||(ft=_()(["\n  color: ",";\n  padding: ","px 0;\n  font-size: ","px;\n  width: 100%;\n"])),(function(e){return e.theme.colors.text}),(function(e){return e.theme.margins.small}),(function(e){return e.theme.font.baseSize})),mt=function(e){var t=e.label,n=e.value,r=e.onChangeText,c=e.type,a=e.autoCorrect,i=e.secure,o=Object(s.c)();return Object(T.jsx)(ht,{value:n,keyboardType:c,autoCapitalize:"none",autoCorrect:a,secureTextEntry:i,placeholderTextColor:o.colors.textShade,placeholder:t,onChangeText:r})},vt=s.b.TouchableOpacity(Ot||(Ot=_()([""]))),gt=s.b.View(pt||(pt=_()(["\n  min-height: 40%;\n"])));function yt(e){var t=e.visible,n=e.onClose,r=e.items,c=e.onSelect,a=e.renderSelect,s=e.getKey,i=e.search,o=e.create,u=e.allowClear,l=Object(O.useState)(""),b=x()(l,2),j=b[0],d=b[1],f=Object(O.useMemo)((function(){return i&&j?i(j,r):r}),[r,j,i]),p=Object(O.useCallback)((function(){d(""),n()}),[d,n]),h=Object(O.useCallback)((function(e){c(e),p()}),[c,p]),v=Object(O.useCallback)((function(){var e;return m.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(o){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,m.a.awrap(o(j));case 4:e=t.sent,c(e),p();case 7:case"end":return t.stop()}}),null,null,null,Promise)}),[o,j,p]);return Object(T.jsxs)(ut,{visible:t,onClose:p,children:[i&&Object(T.jsx)(tt,{children:Object(T.jsx)(mt,{label:"Search",value:j,onChangeText:d})}),Object(T.jsxs)(gt,{children:[o&&0===f.length&&j&&Object(T.jsx)(tt,{children:Object(T.jsx)(ze,{title:"Create "+j,onPress:v})}),f.length>0&&Object(T.jsx)(xt.a,{data:f,keyExtractor:s,style:{flex:1},renderItem:function(e){var t=e.item;return Object(T.jsx)(vt,{onPress:function(){return h(t)},children:a(t)})}}),u&&Object(T.jsx)(tt,{children:Object(T.jsx)(ze,{title:"Clear",onPress:function(){return h(void 0)}})})]})]})}var wt,Pt,St,kt,Ct,Tt,It,Ft,zt,Et,Dt,Vt,$t,Mt,At,Lt,Nt,qt,Rt,Ut,Bt,Jt,Ht,Kt,Gt,Yt,_t=n(27),Wt=n(321),Xt=s.b.View(wt||(wt=_()([""]))),Qt=function(e){var t=e.title,n=e.back,r=e.actions,a=e.right,s=Object(_t.p)(),i=Object(c.d)();return Object(T.jsx)(Xt,{style:{paddingTop:i.top},children:Object(T.jsx)(tt,{left:!!n&&Object(T.jsx)(Qe,{onPress:function(){return s.goBack()},children:Object(T.jsx)(Wt.a,{name:"arrow-back-circle",size:26})}),right:(r||a)&&Object(T.jsxs)(T.Fragment,{children:[r&&r.map((function(e){return Object(T.jsx)(ze,{title:e.title,onPress:e.onPress},e.title)})),a]}),children:Object(T.jsx)(ye,{children:t})})})},Zt=n(225),en=s.b.ScrollView(Pt||(Pt=_()(["\n  height: ","px;\n  width: 100%;\n"])),(function(e){return e.height})),tn=s.b.View(St||(St=_()(["\n  flex-direction: row;\n"]))),nn=s.b.TouchableWithoutFeedback(kt||(kt=_()([""]))),rn=s.b.View(Ct||(Ct=_()(["\n  width: ","px;\n"])),(function(e){return e.width})),cn=s.b.View(Tt||(Tt=_()(["\n  border-radius: 5px;\n  overflow: hidden;\n"]))),an=s.b.View(It||(It=_()(["\n  margin-top: 10px;\n  flex-direction: row;\n  justify-content: center;\n  width: 100%;\n"]))),sn=s.b.View(Ft||(Ft=_()(["\n  width: 6px;\n  height: 6px;\n  background: ",";\n  margin: 0 5px;\n  border-radius: 3px;\n"])),(function(e){return e.selected?"#000":"#ccc"})),on=function(e){var t=e.current,n=e.total,r=Object(O.useMemo)((function(){return new Array(n).fill(void 0).map((function(e,t){return t}))}),[n]);return Object(T.jsx)(an,{children:r.map((function(e){return Object(T.jsx)(sn,{selected:e===t},e)}))})},un=function(e){var t=e.media,n=Object(O.useState)(0),r=x()(n,2),c=r[0],a=r[1],i=Object(O.useState)(0),o=x()(i,2),u=o[0],l=o[1],b=Object(O.useContext)(z),j=b.domain,d=b.token,f=Object(O.useMemo)((function(){return Math.round(u/c)||0}),[u,c]),p=Object(O.useState)(!1),h=x()(p,2),m=h[0],v=h[1],g=Object(O.useMemo)((function(){return t.map((function(e){return{uri:j+"/api/media/"+(null==e?void 0:e.id),headers:{Authorization:"Bearer "+d}}}))}),[j,d,t]),y=Object(O.useMemo)((function(){return t[f]}),[t,f]),w=Object(O.useMemo)((function(){return(null==y?void 0:y.aspect)||1}),[y]);if(0===t.length)return Object(T.jsx)(T.Fragment,{});var P=function(){return Object(T.jsx)(Zt.a,{images:g,imageIndex:f,visible:m,onRequestClose:function(){return v(!1)},FooterComponent:function(){return Object(T.jsxs)(s.a,{theme:R,children:[Object(T.jsx)(tt,{right:Object(T.jsx)(Qe,{children:Object(T.jsx)(X,{name:"download"})})}),Object(T.jsx)(tt,{})]})}})};return 1===t.length?Object(T.jsxs)(tt,{children:[Object(T.jsx)(P,{}),Object(T.jsx)(nn,{onPress:function(){return v(!0)},children:Object(T.jsx)(cn,{children:Object(T.jsx)(Oe,{media:t[0]})})})]}):Object(T.jsxs)(tt,{children:[Object(T.jsx)(P,{}),Object(T.jsx)(cn,{children:Object(T.jsx)(en,{horizontal:!0,scrollEventThrottle:16,snapToInterval:c,showsHorizontalScrollIndicator:!1,decelerationRate:0,snapToAlignment:"center",disableIntervalMomentum:!0,height:c/w,onScroll:function(e){var t=e.nativeEvent.contentOffset.x;l(t)},onLayout:function(e){var t=e.nativeEvent.layout.width;t!==c&&a(t)},children:Object(T.jsx)(nn,{onPress:function(){return v(!0)},children:Object(T.jsx)(tn,{children:t.map((function(e){return Object(T.jsx)(rn,{width:c,children:Object(T.jsx)(Oe,{media:e})},e.id)}))})})})}),Object(T.jsx)(on,{current:f,total:t.length})]})},ln=s.b.View(zt||(zt=_()([""]))),bn=function(e){var t,n,r,c=e.post;return Object(T.jsxs)(ln,{children:[c.media&&Object(T.jsx)(un,{media:c.media}),Object(T.jsx)(tt,{left:Object(T.jsx)(Qe,{children:Object(T.jsx)(he,{mediaId:null==c||null==(t=c.creator)?void 0:t.avatar})}),right:!1,description:c.body,overline:(null==(n=c.creator)?void 0:n.name)||(null==(r=c.creator)?void 0:r.username)})]})},jn=n(145),dn=n(57),fn=s.b.Image(Et||(Et=_()(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  border-radius: 5px;\n"]))),On=s.b.View(Dt||(Dt=_()(["\n  padding-bottom: 100%;\n"]))),pn=s.b.View(Vt||(Vt=_()(["\n  width: 33%;\n  align-items: center;\n  justify-content: center;\n"]))),xn=s.b.View($t||($t=_()(["\n  flex-direction: row;\n  flex-wrap: wrap;\n"]))),hn=s.b.TouchableOpacity(Mt||(Mt=_()(["\n  position: absolute;\n  top: 5px;\n  left: 0px;\n  bottom: 5px;\n  right: 10px;\n  justify-content: center;\n  align-items: center;\n  background: #ddd;\n  border-radius: 5px;\n"]))),mn=s.b.TouchableOpacity(At||(At=_()(["\n  position: absolute;\n  top: 5px;\n  left: 0px;\n  bottom: 5px;\n  right: 10px;\n"]))),vn=function(e){var t=e.files,n=e.onUpdate,r=Object(O.useCallback)((function(){var e,r,c,a,s,i,o;return m.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,m.a.awrap(jn.a({mediaTypes:dn.a.All,quality:1,base64:!0}));case 2:if(!(e=u.sent).cancelled&&e.base64){u.next=5;break}return u.abrupt("return");case 5:r=e.uri.split("/"),c=x()(r,1),a=c[0],s=/\.(\w+)$/.exec(a),i=s?"image/"+s[1]:"image",o={type:i,name:a,uri:e.uri},n([].concat(ve()(t),[o]));case 10:case"end":return u.stop()}}),null,null,null,Promise)}),[t,n]),c=Object(O.useCallback)((function(e){n(t.filter((function(t){return t!==e})))}),[t,n]);return Object(T.jsx)(tt,{children:Object(T.jsxs)(xn,{children:[t.map((function(e){return Object(T.jsxs)(pn,{children:[Object(T.jsx)(On,{}),Object(T.jsx)(mn,{onPress:function(){return c(e)},children:Object(T.jsx)(fn,{source:{uri:e.uri}})})]},e.uri)})),Object(T.jsxs)(pn,{children:[Object(T.jsx)(On,{}),Object(T.jsx)(hn,{onPress:r,children:Object(T.jsx)(X,{name:"plus-circle",size:40})})]})]})})},gn=function(e){var t=e.label,n=e.feeds,r=e.selected,c=e.onSelect,a=Object(O.useState)(!1),s=x()(a,2),i=s[0],o=s[1];return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(tt,{overline:t,onPress:function(){return o(!0)},children:Object(T.jsx)(Pe,{children:(null==r?void 0:r.name)||"Select"})}),Object(T.jsx)(yt,{visible:i,selected:r,onClose:function(){return o(!1)},items:n||[],getKey:function(e){return e.id},onSelect:c,renderSelect:function(e){return Object(T.jsx)(tt,{title:e.name})}})]})},yn=function(e){var t=e.label,n=e.users,r=e.selected,c=e.onSelect,a=Object(O.useState)(!1),s=x()(a,2),i=s[0],o=s[1];return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(tt,{overline:t,onPress:function(){return o(!0)},children:Object(T.jsx)(Pe,{children:(null==r?void 0:r.name)||(null==r?void 0:r.username)||"Select"})}),Object(T.jsx)(yt,{visible:i,selected:r,onClose:function(){return o(!1)},items:n||[],getKey:function(e){return e.id},onSelect:c,renderSelect:function(e){return Object(T.jsx)(tt,{title:e.name||e.username})}})]})},wn=function(e){var t=e.label,n=e.items,r=e.selected,c=e.onSelect,a=Object(O.useState)(!1),s=x()(a,2),i=s[0],o=s[1];return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(tt,{overline:t,onPress:function(){return o(!0)},children:Object(T.jsx)(Pe,{children:(null==r?void 0:r.key)||"Select"})}),Object(T.jsx)(yt,{visible:i,selected:r,onClose:function(){return o(!1)},items:n,getKey:function(e){return e.key},onSelect:c,renderSelect:function(e){return Object(T.jsx)(tt,{title:e.key})}})]})},Pn=n(330),Sn=n(218),kn=(n(322),n(323));function Cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cn(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var In={};Object(Pn.a)(Lt||(Lt=_()(["\n    query Feeds {\n  feeds {\n    id\n    name\n    posts {\n      id\n      body\n      media {\n        id\n      }\n    }\n  }\n}\n    "])));var Fn=Object(Pn.a)(Nt||(Nt=_()(["\n    query Feed($feedId: String!) {\n  feed(id: $feedId) {\n    id\n    name\n    users {\n      accessType\n      user {\n        id\n        name\n        username\n      }\n    }\n  }\n}\n    "])));var zn=Object(Pn.a)(qt||(qt=_()(["\n    mutation CreateFeed($name: String!) {\n  createFeed(name: $name) {\n    id\n  }\n}\n    "])));var En=Object(Pn.a)(Rt||(Rt=_()(["\n    mutation AddUserToFeed($accessType: String!, $userId: String!, $feedId: String!) {\n  addUserToFeed(accessType: $accessType, userId: $userId, feedId: $feedId) {\n    accessType\n  }\n}\n    "])));var Dn=Object(Pn.a)(Ut||(Ut=_()(["\n    mutation RemoveUserFromFeed($userId: String!, $feedId: String!) {\n  removeUserFromFeed(userId: $userId, feedId: $feedId)\n}\n    "])));var Vn=Object(Pn.a)(Bt||(Bt=_()(["\n    query Posts($filter: PostFindParameters!) {\n  posts(filter: $filter) {\n    id\n    body\n    creator {\n      name\n      username\n      avatar\n    }\n    created\n    media {\n      id\n      aspect\n      type\n    }\n  }\n}\n    "])));var $n=Object(Pn.a)(Jt||(Jt=_()(["\n    mutation CreatePost($params: PostCreateParameters!) {\n  createPost(params: $params) {\n    id\n  }\n}\n    "])));var Mn=Object(Pn.a)(Ht||(Ht=_()(["\n    query Profile {\n  profile {\n    id\n    username\n    name\n    admin\n    avatar\n    feeds {\n      feed {\n        id\n        name\n      }\n      accessType\n    }\n  }\n}\n    "])));function An(e){var t=Tn(Tn({},In),e);return Sn.a(Mn,t)}var Ln=Object(Pn.a)(Kt||(Kt=_()(["\n    mutation SetProfileAvatar($mediaId: String) {\n  setProfileAvatar(mediaId: $mediaId) {\n    id\n  }\n}\n    "])));var Nn=Object(Pn.a)(Gt||(Gt=_()(["\n    mutation RegisterPushNotification($token: String!) {\n  registerPushNotification(token: $token) {\n    id\n  }\n}\n    "])));var qn=Object(Pn.a)(Yt||(Yt=_()(["\n    query Users {\n  users {\n    id\n    name\n    username\n    avatar\n  }\n}\n    "])));var Rn=function(){var e=Object(O.useContext)(z).pushToken,t=function(e){var t=Tn(Tn({},In),e);return kn.a(Nn,t)}(),n=x()(t,1)[0];return Object(O.useEffect)((function(){e&&n({variables:{token:e}})}),[e]),Object(T.jsx)(T.Fragment,{})},Un=function(){var e=Object(O.useContext)(z),t=e.domain,n=e.token;return Object(O.useCallback)((function(e){var r;return m.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,m.a.awrap(Promise.all(e.map((function(e){var r,c,a;return m.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return(r=new FormData).append("media",e),s.next=4,m.a.awrap(fetch(t+"/api/media",{method:"POST",body:r,headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+n}}));case 4:if((c=s.sent).ok){s.next=12;break}return s.t0=console,s.next=9,m.a.awrap(c.text());case 9:throw s.t1=s.sent,s.t0.error.call(s.t0,s.t1),new Error("Could not upload image");case 12:return s.next=14,m.a.awrap(c.json());case 14:return a=s.sent,s.abrupt("return",a.ids[0]);case 16:case"end":return s.stop()}}),null,null,null,Promise)}))));case 2:return r=c.sent,c.abrupt("return",r);case 4:case"end":return c.stop()}}),null,null,null,Promise)}),[n,t])},Bn=["data"];function Jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kn,Gn,Yn,_n,Wn,Xn,Qn,Zn,er,tr,nr,rr=function(){var e=Object(O.useContext)(z),t=e.domain,n=e.token,r=function(e){var t=Tn(Tn({},In),e);return kn.a($n,t)}(),c=x()(r,1)[0],a=Un();return Object(O.useCallback)((function(e,t,n){var r;return m.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,m.a.awrap(a(n));case 2:return r=s.sent,s.next=5,m.a.awrap(c({variables:{params:{feed:e,body:t,media:r}}}));case 5:case"end":return s.stop()}}),null,null,null,Promise)}),[c,n,t])},cr=function(e){var t=function(e){var t=Tn(Tn({},In),e);return Sn.a(Vn,t)}({variables:{filter:{feeds:e}}}),n=t.data,r=Me()(t,Bn);console.log(r.error);var c=Object(O.useMemo)((function(){return(null==n?void 0:n.posts)||[]}),[n]);return Hn(Hn({},r),{},{posts:c})},ar=function(){var e=Un(),t=function(e){var t=Tn(Tn({},In),e);return kn.a(Ln,t)}(),n=x()(t,1)[0];return Object(O.useCallback)((function(t){var r,c,a;return m.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(!t){s.next=6;break}return s.next=3,m.a.awrap(e([t]));case 3:s.t0=s.sent,s.next=7;break;case 6:s.t0=[];case 7:return r=s.t0,c=x()(r,1),a=c[0],s.next=12,m.a.awrap(n({variables:{mediaId:a}}));case 12:case"end":return s.stop()}}),null,null,null,Promise)}),[])},sr=function(){var e=An(),t=e.data,n=e.refetch,r=e.loading,c=e.error,a=Object(O.useMemo)((function(){var e;return(null==t||null==(e=t.profile)?void 0:e.feeds)||[]}),[t]);return{profile:Object(O.useMemo)((function(){return null==t?void 0:t.profile}),[t]),feeds:a,refetch:n,loading:r,error:c}},ir=s.b.ScrollView(Kn||(Kn=_()(["\n  flex: 1;\n"]))),or=s.b.View(Gn||(Gn=_()(["\n  flex: 1;\n  background-color: ",";\n"])),(function(e){return e.theme.colors.background})),ur=function(e){var t=e.navigation,n=sr(),r=n.feeds,c=n.refetch,a=Object(O.useState)(),s=x()(a,2),i=s[0],o=s[1],u=Object(O.useState)([]),l=x()(u,2),b=l[0],j=l[1],d=Object(O.useState)(""),f=x()(d,2),p=f[0],h=f[1],v=rr(),g=Object(O.useMemo)((function(){return(null==r?void 0:r.filter((function(e){return"admin"===e.accessType})).map((function(e){return e.feed})))||[]}),[r]),y=Object(O.useCallback)((function(){return m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.awrap(v(i.id,p,b));case 2:o(void 0),j([]),h(""),t.navigate("Feed",{});case 6:case"end":return e.stop()}}),null,null,null,Promise)}),[i,p,b]);return Object(_t.o)(Object(O.useCallback)((function(){c()}),[c])),r?Object(T.jsx)(at,{children:Object(T.jsxs)(or,{children:[Object(T.jsx)(Qt,{title:"Create post"}),Object(T.jsxs)(ir,{children:[Object(T.jsx)(vn,{files:b,onUpdate:j}),Object(T.jsx)(gn,{label:"Feed",feeds:g,selected:i,onSelect:o}),Object(T.jsx)(tt,{overline:"Content",children:Object(T.jsx)(mt,{label:"Tell your story...",value:p,onChangeText:h})})]}),Object(T.jsx)(tt,{children:!!i&&b.length>0&&Object(T.jsx)(ze,{onPress:y,title:"Create"})})]})}):Object(T.jsx)(T.Fragment,{})},lr=n(84),br=s.b.View(Yn||(Yn=_()(["\n  margin-top: 15px;\n  border-bottom-width: 5px;\n  margin-bottom: 15px;\n  border-color: ",";\n"])),(function(e){return e.theme.colors.shade})),jr=s.b.View(_n||(_n=_()(["\n  background-color: ",";\n  flex: 1;\n"])),(function(e){return e.theme.colors.background})),dr=function(){var e=Object(O.useState)([]),t=x()(e,2),n=t[0],r=t[1],c=cr(n.length>0?n:void 0),a=c.posts,s=c.loading,i=c.refetch,o=sr().feeds,u=Object(O.useMemo)((function(){return o.map((function(e){return e.feed}))}),[o]),l=Object(O.useCallback)((function(e){var t=e.item;return Object(T.jsx)(bn,{post:t},t.id)}),[]),b=Object(O.useMemo)((function(){return function(){return Object(T.jsx)(Qt,{title:"All posts",right:Object(T.jsx)(T.Fragment,{children:u.length>1&&Object(T.jsx)(lt,{feeds:u,selected:n,onSelect:r})})},"test")}}),[u,n,r]);return Object(T.jsx)(at,{children:Object(T.jsx)(jr,{children:Object(T.jsx)(xt.a,{ListHeaderComponent:Object(T.jsx)(b,{}),data:a,keyExtractor:function(e){return e.id},renderItem:l,ItemSeparatorComponent:br,refreshControl:Object(T.jsx)(lr.a,{refreshing:s,onRefresh:i})})})})},fr=function(e){var t=function(e){var t=Tn(Tn({},In),e);return Sn.a(Fn,t)}({variables:{feedId:e}}),n=t.data,r=t.refetch,c=t.loading,a=t.error;return{feed:Object(O.useMemo)((function(){return null==n?void 0:n.feed}),[n]),refetch:r,loading:c,error:a}},Or=function(){var e=function(e){var t=Tn(Tn({},In),e);return kn.a(zn,t)}(),t=x()(e,1)[0];return Object(O.useCallback)((function(e){return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.awrap(t({variables:{name:e}}));case 2:case"end":return n.stop()}}),null,null,null,Promise)}),[t])},pr=function(){var e=function(e){var t=Tn(Tn({},In),e);return kn.a(En,t)}(),t=x()(e,1)[0];return Object(O.useCallback)((function(e,n,r){return m.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,m.a.awrap(t({variables:{feedId:e,userId:n,accessType:r}}));case 2:case"end":return c.stop()}}),null,null,null,Promise)}),[t])},xr=function(){var e=function(e){var t=Tn(Tn({},In),e);return kn.a(Dn,t)}(),t=x()(e,1)[0];return Object(O.useCallback)((function(e,n){return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,m.a.awrap(t({variables:{feedId:e,userId:n}}));case 2:case"end":return r.stop()}}),null,null,null,Promise)}),[t])},hr=function(e){var t=e.navigation,n=sr(),r=n.profile,c=n.feeds,a=n.refetch,s=Object(O.useContext)(z).logout,i=Or(),o=Object(O.useState)(!1),u=x()(o,2),l=u[0],b=u[1],j=Object(O.useState)(""),d=x()(j,2),f=d[0],p=d[1],h=ar(),v=Object(O.useCallback)((function(){var e,t,n,r,c,s,i;return m.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,m.a.awrap(jn.a({mediaTypes:dn.a.All,quality:1,base64:!0}));case 2:if(!(e=o.sent).cancelled&&e.base64){o.next=5;break}return o.abrupt("return");case 5:return t=e.uri.split("/"),n=x()(t,1),r=n[0],c=/\.(\w+)$/.exec(r),s=c?"image/"+c[1]:"image",i={type:s,name:r,uri:e.uri},o.next=11,m.a.awrap(h(i));case 11:return o.next=13,m.a.awrap(a());case 13:case"end":return o.stop()}}),null,null,null,Promise)}),[]),g=Object(O.useCallback)((function(){return m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.awrap(i(f));case 2:return p(""),b(!1),e.next=6,m.a.awrap(a());case 6:case"end":return e.stop()}}),null,null,null,Promise)}),[f,i]);return Object(T.jsxs)(at,{children:[Object(T.jsx)(Qt,{title:"Profile"}),Object(T.jsx)(tt,{left:Object(T.jsx)(Qe,{children:Object(T.jsx)(he,{mediaId:(null==r?void 0:r.avatar)||void 0,onPress:v})}),title:(null==r?void 0:r.name)||(null==r?void 0:r.username)}),Object(T.jsxs)(ut,{visible:l,onClose:function(){return b(!1)},children:[Object(T.jsx)(tt,{children:Object(T.jsx)(mt,{label:"Name",value:f,onChangeText:p})}),Object(T.jsx)(tt,{children:Object(T.jsx)(ze,{title:"Save",onPress:g})})]}),Object(T.jsx)(dt,{title:"My feeds",items:c,getKey:function(e){return e.feed.id},add:null!=r&&r.admin?function(){b(!0)}:void 0,render:function(e){return Object(T.jsx)(tt,{title:e.feed.name,overline:e.accessType,right:Object(T.jsx)(Qe,{children:Object(T.jsx)(ze,{title:"Leave",type:"destructive"})}),onPress:function(){t.navigate("FeedEdit",{id:e.feed.id})}})}}),Object(T.jsx)(tt,{children:Object(T.jsx)(ze,{title:"Logout",type:"destructive",onPress:s})})]})},mr=function(){var e=function(e){var t=Tn(Tn({},In),e);return Sn.a(qn,t)}(),t=e.data,n=e.refetch,r=e.loading,c=e.error;return{users:Object(O.useMemo)((function(){return null==t?void 0:t.users}),[t]),refetch:n,loading:r,error:c}},vr=[{key:"Admin",value:"admin"},{key:"Moderator",value:"moderator"},{key:"Writer",value:"writer"},{key:"Reader",value:"reader"}],gr=function(e){var t=e.route.params.id,n=fr(t),r=n.feed,c=n.refetch,a=mr().users,s=xr(),i=pr(),o=Object(O.useState)(!1),u=x()(o,2),l=u[0],b=u[1],j=Object(O.useState)(),d=x()(j,2),f=d[0],p=d[1],h=Object(O.useState)(),v=x()(h,2),g=v[0],y=v[1],w=Object(O.useCallback)((function(){return m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.awrap(i(t,f.id,g.value));case 2:return p(void 0),y(void 0),b(!1),e.next=7,m.a.awrap(c());case 7:case"end":return e.stop()}}),null,null,null,Promise)}),[t,f,g]),P=Object(O.useCallback)((function(e){return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.awrap(s(t,e));case 2:return n.next=4,m.a.awrap(c());case 4:case"end":return n.stop()}}),null,null,null,Promise)}),[t,s,c]);return r?Object(T.jsxs)(at,{children:[Object(T.jsx)(Qt,{title:"Feed"}),Object(T.jsx)(tt,{children:Object(T.jsx)(mt,{label:"Name",value:r.name})}),Object(T.jsx)(dt,{title:"Users",add:function(){b(!0)},items:r.users,getKey:function(e){return e.user.id},render:function(e){return Object(T.jsx)(tt,{overline:e.accessType,title:e.user.name||e.user.username,right:Object(T.jsx)(Qe,{children:Object(T.jsx)(ze,{title:"Remove",onPress:function(){return P(e.user.id)}})})})}}),Object(T.jsxs)(ut,{visible:l,onClose:function(){return b(!1)},children:[Object(T.jsx)(yn,{label:"User",selected:f,onSelect:function(e){return p(e)},users:a}),Object(T.jsx)(wn,{label:"Access type",selected:g,onSelect:function(e){return y(e)},items:vr}),!!g&&!!f&&Object(T.jsx)(tt,{children:Object(T.jsx)(ze,{title:"Save",onPress:w})})]})]}):Object(T.jsx)(T.Fragment,{})},yr=n(139),wr=n.n(yr),Pr=s.b.Image(Wn||(Wn=_()(["\n  width: 300px;\n  height: 300px;\n"]))),Sr=s.b.View(Xn||(Xn=_()(["\n  flex: 1;\n  justify-content: center;\n  align-items: center;\n  background: ",";\n"])),(function(e){return e.theme.colors.shade})),kr=s.b.View(Qn||(Qn=_()(["\n  padding: 15px;\n  margin: 30px;\n  background: ",";\n  border-radius: 15px;\n"])),(function(e){return e.theme.colors.background})),Cr=s.b.Text(Zn||(Zn=_()([""]))),Tr=function(e){e.navigation;var t=Object(O.useContext)(z).login,n=Object(O.useState)(!1),r=x()(n,2),c=r[0],a=r[1],s=Object(O.useState)(),i=x()(s,2),o=i[0],u=i[1],l=Object(O.useState)(""),b=x()(l,2),j=b[0],d=b[1],f=Object(O.useState)(""),p=x()(f,2),h=p[0],v=p[1],g=Object(O.useState)(""),y=x()(g,2),w=y[0],P=y[1],S=Object(O.useCallback)((function(){a(!0);m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.awrap(t(j,h,w));case 2:a(!1);case 3:case"end":return e.stop()}}),null,null,null,Promise).catch((function(e){a(!1),u(e)}))}),[j,h,w]);return c?Object(T.jsx)(Cr,{children:"Loading"}):Object(T.jsx)(at,{children:Object(T.jsx)(Sr,{children:Object(T.jsxs)(kr,{children:[Object(T.jsx)(Pr,{source:wr.a}),o&&Object(T.jsx)(Cr,{children:o.toString()}),Object(T.jsx)(tt,{left:Object(T.jsx)(Qe,{children:Object(T.jsx)(X,{name:"server"})}),children:Object(T.jsx)(mt,{autoCorrect:!1,label:"Domain",value:j,onChangeText:d})}),Object(T.jsx)(tt,{left:Object(T.jsx)(Qe,{children:Object(T.jsx)(X,{name:"user"})}),children:Object(T.jsx)(mt,{autoCorrect:!1,label:"Username",value:h,onChangeText:v})}),Object(T.jsx)(tt,{left:Object(T.jsx)(Qe,{children:Object(T.jsx)(X,{name:"key"})}),children:Object(T.jsx)(mt,{secure:!0,label:"Secret",value:w,onChangeText:P})}),Object(T.jsx)(tt,{children:Object(T.jsx)(ze,{onPress:S,title:"Login"})})]})})})},Ir=n(37),Fr=s.b.Image(er||(er=_()(["\n  width: 300px;\n  height: 300px;\n"]))),zr=s.b.View(tr||(tr=_()(["\n  align-items: center;\n  justify-content: center;\n  padding: 0 20px;\n  flex: 1;\n"]))),Er=s.b.View(nr||(nr=_()(["\n  padding: 15px;\n  margin: 30px;\n  background: ",";\n  border-radius: 15px;\n"])),(function(e){return e.theme.colors.background})),Dr=function(e){var t=e.route,n=(e.navigation,t.params.inviteCode),r=Object(O.useContext)(z).acceptInvitation,c=Object(O.useState)(""),a=x()(c,2),s=a[0],i=a[1],o=Object(O.useState)(""),u=x()(o,2),l=u[0],b=u[1],j=Object(O.useState)(!1),d=x()(j,2),f=d[0],p=d[1],h=Object(O.useState)(),v=x()(h,2),g=(v[0],v[1]),y=Object(O.useCallback)((function(){p(!0);m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.awrap(r(n,s,l));case 2:p(!1);case 3:case"end":return e.stop()}}),null,null,null,Promise).catch((function(e){p(!1),g(e)}))}),[n,s,l]);return f?Object(T.jsx)(Ir.a,{children:"Loading"}):Object(T.jsx)(at,{children:Object(T.jsx)(zr,{children:Object(T.jsxs)(Er,{children:[Object(T.jsx)(Fr,{source:wr.a}),Object(T.jsx)(tt,{description:"You are almost there! Just pick your username and password and off we go!"}),Object(T.jsx)(tt,{left:Object(T.jsx)(Qe,{children:Object(T.jsx)(X,{name:"user"})}),children:Object(T.jsx)(mt,{autoCorrect:!1,label:"Username",value:s,onChangeText:i})}),Object(T.jsx)(tt,{left:Object(T.jsx)(Qe,{children:Object(T.jsx)(X,{name:"key"})}),children:Object(T.jsx)(mt,{secure:!0,label:"Password",value:l,onChangeText:b})}),Object(T.jsx)(tt,{children:Object(T.jsx)(ze,{onPress:y,title:"Let's GO"})})]})})})};function Vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mr=Object(K.a)(),Ar=Object(U.a)(),Lr=Object(K.a)(),Nr=function(){return Object(T.jsx)(Lr.Navigator,{screenOptions:{headerShown:!1},children:Object(T.jsx)(Lr.Screen,{name:"ProfileMain",component:hr})})},qr=function(){var e=Object(s.c)(),t=sr().profile,n=Object(O.useMemo)((function(){var e;return null==t||null==(e=t.feeds)?void 0:e.find((function(e){return"admin"===e.accessType||"moderator"===e.accessType||"writer"===e.accessType}))}),[t]);return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Rn,{}),Object(T.jsxs)(Ar.Navigator,{screenOptions:{headerShown:!1,tabBarActiveTintColor:e.colors.primary},children:[Object(T.jsx)(Ar.Screen,{name:"Feed",component:dr,options:{title:"Posts",tabBarIcon:function(e){var t=e.focused;return Object(T.jsx)(X,{color:t?"primary":"text",name:"home",size:28})}}}),n&&Object(T.jsx)(Ar.Screen,{name:"Add",component:ur,options:{title:"Add",tabBarIcon:function(e){var t=e.focused;return Object(T.jsx)(X,{color:t?"primary":"text",name:"plus-square",size:28})}}}),Object(T.jsx)(Ar.Screen,{name:"Profile",component:Nr,options:{title:"Profile",tabBarIcon:function(e){var t=e.focused;return Object(T.jsx)(X,{color:t?"primary":"text",name:"user",size:28})}}})]})]})},Rr=function(){var e=Object(s.c)(),t=Object(O.useContext)(z).domain;return Object(T.jsx)(Mr.Navigator,{screenOptions:{headerShown:!1},children:t?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Mr.Group,{children:Object(T.jsx)(Mr.Screen,{name:"Main",component:qr})}),Object(T.jsx)(Mr.Group,{screenOptions:{contentStyle:{backgroundColor:e.colors.shade},presentation:"modal"},children:Object(T.jsx)(Mr.Screen,{name:"FeedEdit",component:gr})})]}):Object(T.jsxs)(Mr.Group,{children:[Object(T.jsx)(Mr.Screen,{name:"Login",component:Tr}),Object(T.jsx)(Mr.Screen,{initialParams:{inviteCode:""},name:"AcceptInvitation",component:Dr})]})})},Ur=function(e){var t=e.colorScheme,n=Object(s.c)(),r=Object(O.useMemo)((function(){return"dark"===t?B.a:J.a}),[t]),c=Object(O.useMemo)((function(){return $r($r({},r),{},{colors:$r($r({},r.colors),{},{background:n.colors.shade,card:n.colors.background,text:n.colors.text})})}),[r,n]);return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(H.a,{linking:G,theme:c,children:Object(T.jsx)(Rr,{})})})};r.a.getSizeWithHeaders=function(e,t,n,r){n(100,100)},console.log("foo",r.a);t.a=function(){var e=Object(a.a)();return Object(T.jsx)(s.a,{theme:"dark"===e?R:M,children:Object(T.jsx)(c.b,{children:Object(T.jsxs)(E,{children:[Object(T.jsx)(i.a,{style:"dark"===e?"light":"dark"}),Object(T.jsx)($,{children:Object(T.jsx)(Ur,{colorScheme:e})})]})})})}},237:function(e,t,n){e.exports=n(301)}},[[237,1,2]]]);
//# sourceMappingURL=app.96de2f96.chunk.js.map